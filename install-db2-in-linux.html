<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head>
    <meta charset="utf-8">
<title>Install DB2 in Linux - My Notebook</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css">


<meta name="description" content="How to install db2 server in Linux">



<meta name="keywords" content="db2">







<link rel="icon" href="/images/favicon.ico">


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro|Calibri|Ubuntu">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">



<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">

<link rel="stylesheet" href="/css/style.css">

<script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script>


    
    
    
    
    
    

    


</head>
<body>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/">
                
                    
                    My Notebook
                    
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item "
               href="/">Home</a>
            
            <a class="navbar-item "
               href="/about">About</a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            <a class="navbar-item search" title="Search" href="javascript:;">
                <i class="fas fa-search"></i>
            </a>
            
            
            
        </div>
    </div>
</nav>

    <section class="section">
    <div class="container">
    <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            Install DB2 in Linux
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2015-08-28T06:39:30.000Z" itemprop="datePublished">Aug 28 2015</time>
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/categories/db2/">db2</a>
        </span>
        
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <p>Install DB2 server in Linux may not as difficult as Oracle database server installation in Linux, it just need a little change to install DB2 server in Linux, espacially in silent mode. This post just a practice of my homework. And any suggestions will be welcome.<br><a id="more"></a></p>
<h3 id="I-pre-install-tasks"><a href="#I-pre-install-tasks" class="headerlink" title="I. pre-install tasks"></a>I. pre-install tasks</h3><p>My test environment OS is RHEL6.5 X64, and DB2 version is v10.1. Since v9.7.2, the kernal parameters do not need to modify manually, as the database manager modifies kernal parameters dynamically when it starts. And not like Oracle, DB2 with response file installation no need to create account in OS, as you can specify users in the response file.</p>
<h4 id="1-edit-etc-hosts-add-hostname-and-ip-address-and-disable-selinux"><a href="#1-edit-etc-hosts-add-hostname-and-ip-address-and-disable-selinux" class="headerlink" title="1. edit /etc/hosts, add hostname and ip address, and disable selinux"></a>1. edit /etc/hosts, add hostname and ip address, and disable selinux</h4><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@hadr01 ~]# cat /etc/hosts</span><br><span class="line">127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4</span><br><span class="line">::1         localhost localhost.localdomain localhost6 localhost6.localdomain6</span><br><span class="line"></span><br><span class="line">192.168.56.60   hadr01</span><br><span class="line">192.168.56.61   hadr02</span><br><span class="line"></span><br><span class="line">[root@hadr01 worktmp]# sed -i &apos;/^SELINUX/s/enforcing/disabled/g&apos; /etc/selinux/config</span><br></pre></td></tr></table></figure>
<h4 id="2-extract-DB2-binary-and-run-prerecheck"><a href="#2-extract-DB2-binary-and-run-prerecheck" class="headerlink" title="2. extract DB2 binary, and run prerecheck"></a>2. extract DB2 binary, and run prerecheck</h4><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@hadr01 worktmp]# ls -ltr</span><br><span class="line">total 734968</span><br><span class="line">drwxr-xr-x. 3 root root      4096 Apr  4  2012 server</span><br><span class="line">-rw-r--r--. 1 root root       999 Sep  5 10:24 db2ese_c.lic</span><br><span class="line">-rw-r--r--. 1 root root 752588810 Sep  5 10:24 v10.1_linuxx64_server.tar.gz</span><br><span class="line">-rw-r--r--. 1 root root      1528 Sep  5 10:59 db2ese.rsp</span><br><span class="line">[root@hadr01 worktmp]# cd server/</span><br><span class="line">[root@hadr01 server]# ./db2prereqcheck</span><br></pre></td></tr></table></figure>
<p>Fix the warnings or errors until all requirements <code>db2prereqcheck</code> matched.<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">--For TSAMP installation</span><br><span class="line">[root@hadr01 server]# yum install libstdc++.i686 perl ksh pam.i686 -y</span><br></pre></td></tr></table></figure></p>
<h3 id="3-create-the-response-file-using-the-sample-responses-file"><a href="#3-create-the-response-file-using-the-sample-responses-file" class="headerlink" title="3. create the response file using the sample responses file"></a>3. create the response file using the sample responses file</h3><p>The sample response file located at <code>server/db2/platform/samples/</code>,<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@hadr01 samples]# pwd</span><br><span class="line">/worktmp/server/db2/linuxamd64/samples</span><br><span class="line">[root@hadr01 samples]# ls -ltr</span><br><span class="line">total 368</span><br><span class="line">-r--r--r--. 1 bin bin 42350 Apr  4  2012 db2pe.rsp</span><br><span class="line">-r--r--r--. 1 bin bin 54144 Apr  4  2012 db2ese.rsp</span><br><span class="line">-r--r--r--. 1 bin bin 43397 Apr  4  2012 db2consv.rsp</span><br><span class="line">-r--r--r--. 1 bin bin 27826 Apr  4  2012 db2client.rsp</span><br><span class="line">-r--r--r--. 1 bin bin 54035 Apr  4  2012 db2wse.rsp</span><br><span class="line">-r--r--r--. 1 bin bin 54435 Apr  4  2012 db2aese.rsp</span><br><span class="line">-r--r--r--. 1 bin bin  9440 Apr  4  2012 db2un.rsp</span><br><span class="line">-r--r--r--. 1 bin bin 43713 Apr  4  2012 db2exp.rsp</span><br><span class="line">-r--r--r--. 1 bin bin 26381 Apr  4  2012 db2rtcl.rsp</span><br><span class="line"></span><br><span class="line">[root@hadr01 samples]# mv db2ese.rsp /worktmp/</span><br><span class="line">[root@hadr01 samples]# cd /worktmp/</span><br></pre></td></tr></table></figure></p>
<p>Edit the response file to meet your environment.<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">[root@hadr01 worktmp]# cat db2ese.rsp </span><br><span class="line">LIC_AGREEMENT       = ACCEPT</span><br><span class="line">PROD       = ENTERPRISE_SERVER_EDITION</span><br><span class="line">FILE       = /opt/ibm/db2/V10.1</span><br><span class="line">INSTALL_TYPE       = CUSTOM</span><br><span class="line">COMP       = TSAMP</span><br><span class="line">COMP       = APPLICATION_DEVELOPMENT_TOOLS</span><br><span class="line">COMP       = COMMUNICATION_SUPPORT_TCPIP</span><br><span class="line">COMP       = JDK</span><br><span class="line">COMP       = JAVA_SUPPORT</span><br><span class="line">COMP       = BASE_DB2_ENGINE</span><br><span class="line">COMP       = REPL_CLIENT</span><br><span class="line">COMP       = LDAP_EXPLOITATION</span><br><span class="line">COMP       = INSTANCE_SETUP_SUPPORT</span><br><span class="line">COMP       = DB2_SAMPLE_DATABASE</span><br><span class="line">COMP       = ACS</span><br><span class="line">COMP       = SQL_PROCEDURES</span><br><span class="line">COMP       = DB2_DATA_SOURCE_SUPPORT</span><br><span class="line">COMP       = BASE_CLIENT</span><br><span class="line">COMP       = CONNECT_SUPPORT</span><br><span class="line">* ----------------------------------------------</span><br><span class="line">*  Instance properties           </span><br><span class="line">* ----------------------------------------------</span><br><span class="line">INSTANCE                        = inst1</span><br><span class="line">inst1.TYPE                      = ese</span><br><span class="line">*  Instance-owning user</span><br><span class="line">inst1.NAME                      = db2v10i</span><br><span class="line">inst1.GROUP_NAME                = db2iadm1</span><br><span class="line">inst1.HOME_DIRECTORY            = /home/db2v10i</span><br><span class="line">inst1.PASSWORD                  = db24ever</span><br><span class="line">ENCRYPTED                       = inst1.PASSWORD</span><br><span class="line">inst1.AUTOSTART                 = YES</span><br><span class="line">inst1.SVCENAME                  = db2c_db2v10i</span><br><span class="line">inst1.PORT_NUMBER               = 50000</span><br><span class="line">inst1.FCM_PORT_NUMBER           = 60000</span><br><span class="line">inst1.MAX_LOGICAL_NODES         = 4</span><br><span class="line">inst1.CONFIGURE_TEXT_SEARCH     = NO</span><br><span class="line">*  Fenced user</span><br><span class="line">inst1.FENCED_USERNAME           = db2fenc1</span><br><span class="line">inst1.FENCED_GROUP_NAME         = db2fadm1</span><br><span class="line">inst1.FENCED_HOME_DIRECTORY     = /home/db2fenc1</span><br><span class="line">inst1.FENCED_PASSWORD           = db24ever</span><br><span class="line">ENCRYPTED                       = inst1.FENCED_PASSWORD</span><br><span class="line">*-----------------------------------------------</span><br><span class="line">*  Installed Languages </span><br><span class="line">*-----------------------------------------------</span><br><span class="line">LANG                            = EN</span><br></pre></td></tr></table></figure></p>
<h3 id="II-Install-DB2-using-respons-file"><a href="#II-Install-DB2-using-respons-file" class="headerlink" title="II. Install DB2 using respons file"></a>II. Install DB2 using respons file</h3><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@hadr01 install]# cd /worktmp/server/</span><br><span class="line">[root@hadr01 server]# ./db2setup -r /worktmp/db2ese.rsp -l /worktmp/db2setup.log -t /worktmp/db2setup.trc</span><br><span class="line">DBI1191I  db2setup is installing and configuring DB2 according to the</span><br><span class="line">      response file provided. Please wait.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">The execution completed successfully.</span><br><span class="line"></span><br><span class="line">For more information see the DB2 installation log at &quot;/worktmp/db2setup.log&quot;.</span><br></pre></td></tr></table></figure>
<h3 id="III-Post-install-tasks"><a href="#III-Post-install-tasks" class="headerlink" title="III. Post-install tasks"></a>III. Post-install tasks</h3><h4 id="1-Configure-firewall-for-DB2-service-port"><a href="#1-Configure-firewall-for-DB2-service-port" class="headerlink" title="1. Configure firewall for DB2 service port"></a>1. Configure firewall for DB2 service port</h4><p>You dont need to manual configure database manager parameter &quot;scvename&quot;, as the response file already did. What we need to do is opening the service port in firewall.<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">[root@hadr01 ~]# cat /etc/sysconfig/iptables</span><br><span class="line"># Firewall configuration written by system-config-firewall</span><br><span class="line"># Manual customization of this file is not recommended.</span><br><span class="line">*filter</span><br><span class="line">:INPUT ACCEPT [0:0]</span><br><span class="line">:FORWARD ACCEPT [0:0]</span><br><span class="line">:OUTPUT ACCEPT [0:0]</span><br><span class="line">-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT</span><br><span class="line">-A INPUT -p icmp -j ACCEPT</span><br><span class="line">-A INPUT -i lo -j ACCEPT</span><br><span class="line">-A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT</span><br><span class="line">#For DB2 services</span><br><span class="line">#-A INPUT -p tcp --dport 50000 -j ACCEPT</span><br><span class="line">#-A OUTPUT -p tcp --sport 50000 -j ACCEPT</span><br><span class="line">-A INPUT -m state --state NEW -m tcp -p tcp --dport 50000 -j ACCEPT</span><br><span class="line">-A OUTPUT -m state --state NEW -m tcp -p tcp --sport 50000 -j ACCEPT</span><br><span class="line"></span><br><span class="line">-A INPUT -j REJECT --reject-with icmp-host-prohibited</span><br><span class="line">-A FORWARD -j REJECT --reject-with icmp-host-prohibited</span><br><span class="line">COMMIT</span><br><span class="line"></span><br><span class="line">[root@hadr01 server]# iptables -L -n |grep 50000</span><br><span class="line">ACCEPT     tcp  --  0.0.0.0/0            0.0.0.0/0           tcp dpt:50000 </span><br><span class="line">ACCEPT     tcp  --  0.0.0.0/0            0.0.0.0/0           tcp spt:50000 </span><br><span class="line">[root@hadr01 ~]# cat /etc/services |grep 50000</span><br><span class="line">db2c_db2v10i    50000/tcp</span><br><span class="line">[db2v10i@hadr01 ~]$ db2 get dbm cfg |grep -i svcename</span><br><span class="line"> TCP/IP Service name                          (SVCENAME) = db2c_db2v10i</span><br></pre></td></tr></table></figure></p>
<h4 id="2-Add-license"><a href="#2-Add-license" class="headerlink" title="2. Add license"></a>2. Add license</h4><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[db2v10i@hadr01 ~]$ db2licm -a /worktmp/db2ese_c.lic</span><br><span class="line"></span><br><span class="line">LIC1402I  License added successfully.</span><br><span class="line"></span><br><span class="line">LIC1426I  This product is now licensed for use as outlined in your License Agreement.  </span><br><span class="line">USE OF THE PRODUCT CONSTITUTES ACCEPTANCE OF THE TERMS OF THE IBM LICENSE AGREEMENT, </span><br><span class="line">LOCATED IN THE FOLLOWING DIRECTORY: &quot;/opt/ibm/db2/V10.1/license/en_US.iso88591&quot;</span><br><span class="line">[db2v10i@hadr01 ~]$ db2licm -l</span><br><span class="line">Product name:                     &quot;DB2 Enterprise Server Edition&quot;</span><br><span class="line">License type:                     &quot;CPU Option&quot;</span><br><span class="line">Expiry date:                      &quot;Permanent&quot;</span><br><span class="line">Product identifier:               &quot;db2ese&quot;</span><br><span class="line">Version information:              &quot;10.1&quot;</span><br><span class="line">Enforcement policy:               &quot;Soft Stop&quot;</span><br></pre></td></tr></table></figure>
<h4 id="3-Create-database"><a href="#3-Create-database" class="headerlink" title="3. Create database"></a>3. Create database</h4><p>--Create sample database (optional)<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@hadr01 ~]# mkdir -p /db2/&#123;data,backup,arch,log&#125;</span><br><span class="line">[root@hadr01 ~]# chown -R db2v10i:db2iadm1 /db2/</span><br><span class="line">[db2v10i@hadr01 ~]$ db2sampl -dbpath /db2/data -name mysample -sql -force -verbose</span><br><span class="line">  Creating database &quot;mysample&quot; on path &quot;/db2/data&quot;...</span><br><span class="line">  Connecting to database &quot;mysample&quot;...</span><br><span class="line">  Creating tables and data in schema &quot;DB2V10I&quot;...</span><br><span class="line">  &apos;db2sampl&apos; processing complete.</span><br></pre></td></tr></table></figure></p>
<p>--Create user defined database<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[db2v10i@hadr01 ~]$ db2 create db testdb automatic storage yes on &apos;/db2/data&apos; DBPATH on &apos;/db2/data&apos; using codeset UTF-8 TERRITORY US</span><br><span class="line">DB20000I  The CREATE DATABASE command completed successfully.</span><br></pre></td></tr></table></figure></p>
<h4 id="4-Configure-client-connections"><a href="#4-Configure-client-connections" class="headerlink" title="4. Configure client connections"></a>4. Configure client connections</h4><p>On the clients:<br>First, catalog node on clients:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[db2inst1@db2v10 ~]$ db2 catalog tcpip node hadr01 remote 192.168.56.60 server 50000</span><br><span class="line">DB20000I  The CATALOG TCPIP NODE command completed successfully.</span><br><span class="line">DB21056W  Directory changes may not be effective until the directory cache is </span><br><span class="line">refreshed.</span><br><span class="line">[db2inst1@db2v10 ~]$ db2 list node directory</span><br><span class="line"> Node Directory</span><br><span class="line"> Number of entries in the directory = 1</span><br><span class="line">Node 1 entry:</span><br><span class="line"> Node name                      = HADR01</span><br><span class="line"> Comment                        =</span><br><span class="line"> Directory entry type           = LOCAL</span><br><span class="line"> Protocol                       = TCPIP</span><br><span class="line"> Hostname                       = 192.168.56.60</span><br><span class="line"> Service name                   = 50000</span><br></pre></td></tr></table></figure></p>
<p>Second, catalog database on clients:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[db2inst1@db2v10 ~]$ db2 catalog database testdb as testdb at node hadr01</span><br><span class="line">DB20000I  The CATALOG DATABASE command completed successfully.</span><br><span class="line">DB21056W  Directory changes may not be effective until the directory cache is </span><br><span class="line">refreshed.</span><br><span class="line">[db2inst1@db2v10 ~]$ db2 list db directory</span><br><span class="line"> System Database Directory</span><br><span class="line"> Number of entries in the directory = 1</span><br><span class="line">Database 1 entry:</span><br><span class="line"> Database alias                       = TESTDB</span><br><span class="line"> Database name                        = TESTDB</span><br><span class="line"> Node name                            = HADR01</span><br><span class="line"> Database release level               = 10.00</span><br><span class="line"> Comment                              =</span><br><span class="line"> Directory entry type                 = Remote</span><br><span class="line"> Catalog database partition number    = -1</span><br><span class="line"> Alternate server hostname            =</span><br><span class="line"> Alternate server port number         =</span><br></pre></td></tr></table></figure></p>
<p>In the output, where &quot;Directory entry type&quot; equals &quot;remote&quot;, it means from the database is on a remote server, oppositely, where the &quot;Directory entry type&quot; equals &quot;indirect&quot;, it means a local database.<br>Now, we can connect to the server in the client:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[db2inst1@db2v10 ~]$ db2 connect to testdb user db2v10i</span><br><span class="line">Enter current password for db2v10i: </span><br><span class="line">SQL30081N  A communication error has been detected. Communication protocol </span><br><span class="line">being used: &quot;TCP/IP&quot;.  Communication API being used: &quot;SOCKETS&quot;.  Location </span><br><span class="line">where the error was detected: &quot;192.168.56.60&quot;.  Communication function </span><br><span class="line">detecting the error: &quot;connect&quot;.  Protocol specific error code(s): &quot;113&quot;, &quot;*&quot;, </span><br><span class="line">&quot;*&quot;.  SQLSTATE=08001</span><br></pre></td></tr></table></figure></p>
<p>Something wrong with the client connection. And I found that the issue was firewall configure not correct. In RHEL6, in firewall configuration file <code>/etc/sysconfig/iptables</code>, if you need to open the other port, your configure command need to below 22 port. For example:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@hadr01 ~]# cat /etc/sysconfig/iptables</span><br><span class="line"># Firewall configuration written by system-config-firewall</span><br><span class="line"># Manual customization of this file is not recommended.</span><br><span class="line">*filter</span><br><span class="line">:INPUT ACCEPT [0:0]</span><br><span class="line">:FORWARD ACCEPT [0:0]</span><br><span class="line">:OUTPUT ACCEPT [0:0]</span><br><span class="line">-A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT</span><br><span class="line">-A INPUT -p icmp -j ACCEPT</span><br><span class="line">-A INPUT -i lo -j ACCEPT</span><br><span class="line">-A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT</span><br><span class="line">#For DB2 services, open other port need to follow the 22 port</span><br><span class="line">#-A INPUT -p tcp --dport 50000 -j ACCEPT</span><br><span class="line">#-A OUTPUT -p tcp --sport 50000 -j ACCEPT</span><br><span class="line">-A INPUT -m state --state NEW -m tcp -p tcp --dport 50000 -j ACCEPT</span><br><span class="line">-A OUTPUT -m state --state NEW -m tcp -p tcp --sport 50000 -j ACCEPT</span><br><span class="line"></span><br><span class="line">-A INPUT -j REJECT --reject-with icmp-host-prohibited</span><br><span class="line">-A FORWARD -j REJECT --reject-with icmp-host-prohibited</span><br><span class="line">COMMIT</span><br></pre></td></tr></table></figure></p>
<p>Try to reconnect:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[db2inst1@db2v10 ~]$ db2 connect to testdb user db2v10i using db24ever</span><br><span class="line">   Database Connection Information</span><br><span class="line"> Database server        = DB2/LINUXX8664 10.1.0</span><br><span class="line"> SQL authorization ID   = DB2V10I</span><br><span class="line"> Local database alias   = TESTDB</span><br></pre></td></tr></table></figure></p>
<h4 id="5-Configure-archive-log-using-disk"><a href="#5-Configure-archive-log-using-disk" class="headerlink" title="5.Configure archive log using disk"></a>5.Configure archive log using disk</h4><p>DB2 offer 2 methods to manager transaction logs, circular and archive, most of production environment using archive log mode.<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[db2v10i@hadr01 ~]$ mkdir -p /db2/log/db2v10i/mysample</span><br><span class="line">[db2v10i@hadr01 ~]$ db2 update db cfg for mysample using NEWLOGPATH /db2/log/db2v10i/mysample</span><br><span class="line">DB20000I  The UPDATE DATABASE CONFIGURATION command completed successfully.</span><br><span class="line">SQL1363W  Database must be deactivated and reactivated before the changes to </span><br><span class="line">one or more of the configuration parameters will be effective.</span><br><span class="line">[db2v10i@hadr01 ~]$ db2 terminate</span><br><span class="line">DB20000I  The TERMINATE command completed successfully.</span><br><span class="line">[db2v10i@hadr01 ~]$ db2 deactivate database mysample</span><br><span class="line">DB20000I  The DEACTIVATE DATABASE command completed successfully.</span><br><span class="line">[db2v10i@hadr01 ~]$ db2 activate database mysample</span><br><span class="line">DB20000I  The ACTIVATE DATABASE command completed successfully.</span><br><span class="line">[db2v10i@hadr01 ~]$ db2 get db cfg for mysample |grep -i log</span><br><span class="line"> Log retain for recovery status                          = NO</span><br><span class="line"> User exit for logging status                            = NO</span><br><span class="line"> Catalog cache size (4KB)              (CATALOGCACHE_SZ) = (MAXAPPLS*5)</span><br><span class="line"> Log buffer size (4KB)                        (LOGBUFSZ) = 256</span><br><span class="line"> Log file size (4KB)                         (LOGFILSIZ) = 1000</span><br><span class="line"> Number of primary log files                (LOGPRIMARY) = 3</span><br><span class="line"> Number of secondary log files               (LOGSECOND) = 10</span><br><span class="line"> Changed path to log files                  (NEWLOGPATH) = </span><br><span class="line"> Path to log files                                       = /db2/log/db2v10i/mysample/NODE0000/LOGSTREAM0000/</span><br></pre></td></tr></table></figure></p>
<p>Change default circular log mode to archive log<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[db2v10i@hadr01 ~]$ db2 get db cfg for mysample |grep -i LOGARCHMETH1</span><br><span class="line"> First log archive method                 (LOGARCHMETH1) = OFF</span><br><span class="line"> Archive compression for logarchmeth1    (LOGARCHCOMPR1) = OFF</span><br><span class="line"> Options for logarchmeth1                  (LOGARCHOPT1) = </span><br><span class="line"></span><br><span class="line">[db2v10i@hadr01 ~]$ db2 update db cfg for mysample using LOGARCHMETH1 disk:db2/arch/mysample</span><br><span class="line">DB20000I  The UPDATE DATABASE CONFIGURATION command completed successfully.</span><br><span class="line">SQL1363W  Database must be deactivated and reactivated before the changes to one or more of the configuration parameters will be effective.</span><br><span class="line">[db2v10i@hadr01 ~]$ db2 terminate</span><br><span class="line">DB20000I  The TERMINATE command completed successfully.</span><br><span class="line">[db2v10i@hadr01 ~]$ db2 deactivate database mysample</span><br><span class="line">DB20000I  The DEACTIVATE DATABASE command completed successfully.</span><br></pre></td></tr></table></figure></p>
<p>After modifying the LOGARCHMETH1 parameter the database will need  an offline full backup:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[db2v10i@hadr01 ~]$ db2 backup db mysample to /db2/backup/mysample/</span><br><span class="line">Backup successful. The timestamp for this backup image is : 20150906162210</span><br><span class="line"></span><br><span class="line">[db2v10i@hadr01 ~]$ db2 activate database mysample</span><br><span class="line">DB20000I  The ACTIVATE DATABASE command completed successfully.</span><br><span class="line">[db2inst1@hadr01 ~]$ db2 connect to testdb</span><br><span class="line">[db2v10i@hadr01 ~]$ db2 get db cfg for mysample |grep -i LOGARCHMETH1</span><br><span class="line"> First log archive method                 (LOGARCHMETH1) = DISK:/db2/arch/mysample/</span><br></pre></td></tr></table></figure></p>
<p>Manual archive a log, and check the archive whether works or not:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[db2v10i@hadr01 ~]$ ll /db2/arch/mysample/db2v10i/MYSAMPLE/NODE0000/LOGSTREAM0000/C0000000/</span><br><span class="line">total 0</span><br><span class="line"></span><br><span class="line">[db2v10i@hadr01 ~]$ db2 connect reset</span><br><span class="line">DB20000I  The SQL command completed successfully.</span><br><span class="line">[db2v10i@hadr01 ~]$ db2 archive log for database mysample</span><br><span class="line">DB20000I  The ARCHIVE LOG command completed successfully.</span><br><span class="line"></span><br><span class="line">[db2v10i@hadr01 ~]$ ll /db2/arch/mysample/db2v10i/MYSAMPLE/NODE0000/LOGSTREAM0000/C0000000/</span><br><span class="line">total 12</span><br><span class="line">-rw-r----- 1 db2v10i db2iadm1 12288 Sep  6 16:25 S0000000.LOG</span><br></pre></td></tr></table></figure></p>
<h4 id="6-Configure-incremental-tracking-mode"><a href="#6-Configure-incremental-tracking-mode" class="headerlink" title="6.Configure incremental tracking mode"></a>6.Configure incremental tracking mode</h4><p>If you want to backup the database in the incremental or delta mode, the trackmod configuration parameter must be set to &quot;ON&quot;<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[db2v10i@hadr01 ~]$ db2 update db cfg for mysample using trackmod on</span><br><span class="line">DB20000I  The UPDATE DATABASE CONFIGURATION command completed successfully.</span><br><span class="line">SQL1363W  Database must be deactivated and reactivated before the changes to one or more of the configuration parameters will be effective.</span><br></pre></td></tr></table></figure></p>
<p>After changing this parameter to &quot;ON&quot; you will also need to take a full backup (online or offline) to establish the baseline for incremental or delta backups.<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[db2v10i@hadr01 ~]$ db2 backup database mysample online to /db2/backup/mysample/ include logs</span><br><span class="line">Backup successful. The timestamp for this backup image is : 20150906163124</span><br></pre></td></tr></table></figure></p>
<p><br><br><b>EOF</b><br></p>

    
    </div>
    
    <div class="columns is-variable is-1 is-multiline is-mobile">
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/db2/">#db2</a></span>
    
    </div>
    
    
    <div class="columns is-mobile is-multiline article-nav">
        <span class="column is-12-mobile is-half-desktop  article-nav-prev">
            
            <a href="/upgrade-and-fixpack-db2-database.html">Upgrade and fix pack db2 database</a>
            
        </span>
        <span class="column is-12-mobile is-half-desktop  article-nav-next">
            
            <a href="/mhvtl-and-nbu.html">MHVTL and NBU</a>
            
        </span>
    </div>
    
</article>




    </div>
</section>
    <footer class="footer footer-padding">
    <div class="container content">
            <div class="column is-narrow has-text-centered is-size-7-mobile">
                &copy; 2013 - 2018
                <a href="/">Fung Kong&nbsp;
                </a>
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
            </div>
    </div>
</footer>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script>

<!-- test if the browser is outdated -->
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        // plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script>

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
    moment.locale("en-AU");
</script>


    
    
    
    
    
    

    


<script src="/js/script.js"></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-mask"></div>
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js"></script>
    
</body>
</html>