<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head>
    <meta charset="utf-8">
<title>Recovering a dropped table in Oracle and DB2 - My Notebook</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css">


<meta name="description" content="how to recover a dropped table in Oracle and DB2">



<meta name="keywords" content="recover dropped table">







<link rel="icon" href="/images/favicon.ico">


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro|Calibri|Ubuntu">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">



<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">

<link rel="stylesheet" href="/css/style.css">

<script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script>


    
    
    
    
    
    

    


</head>
<body>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/">
                
                    
                    My Notebook
                    
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item "
               href="/">Home</a>
            
            <a class="navbar-item "
               href="/about">About</a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            <a class="navbar-item search" title="Search" href="javascript:;">
                <i class="fas fa-search"></i>
            </a>
            
            
            
        </div>
    </div>
</nav>

    <section class="section">
    <div class="container">
    <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            Recovering a dropped table in Oracle and DB2
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2016-03-03T12:06:21.000Z" itemprop="datePublished">Mar 3 2016</time>
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/categories/db2/">db2</a>
        </span>
        
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <p>When DBA dropped a table accidentally, always need a quick way to recover the dropped table. What I mean &quot;quick way&quot; is not only recovering the dropped table as soon as possible, but also should not affect other applications in the same database.<br><a id="more"></a></p>
<h3 id="1-Recover-a-dropped-table-in-Oracle"><a href="#1-Recover-a-dropped-table-in-Oracle" class="headerlink" title="1. Recover a dropped table in Oracle"></a>1. Recover a dropped table in Oracle</h3><p>If your database version is above 10g, and the recyclebin is enable, you can just simply use recyclebin feature to UNDO the dropped table.<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; show parameter recyclebin</span><br><span class="line">NAME				     TYPE		    VALUE</span><br><span class="line">------------------------------------ ---------------------- ------------------------------</span><br><span class="line">recyclebin			     string		    on</span><br><span class="line">--drop a table</span><br><span class="line">SQL&gt; conn fung/oracle</span><br><span class="line">Connected.</span><br><span class="line">SQL&gt; select count(*) from t;</span><br><span class="line">  COUNT(*)</span><br><span class="line">----------</span><br><span class="line">     86260</span><br><span class="line">SQL&gt; drop table t;</span><br><span class="line">Table dropped.</span><br><span class="line">SQL&gt; show recyclebin</span><br><span class="line">ORIGINAL NAME	 RECYCLEBIN NAME		OBJECT TYPE  DROP TIME</span><br><span class="line">---------------- ------------------------------ ------------ -------------------</span><br><span class="line">T		 BIN$LSJDDhSaBtDgU8g4qMAzSA==$0 TABLE	     2016-03-03:17:02:45</span><br><span class="line">SQL&gt; flashback table t to before drop;</span><br><span class="line">Flashback complete.</span><br><span class="line">SQL&gt; select count(*) from t;</span><br><span class="line"></span><br><span class="line">  COUNT(*)</span><br><span class="line">----------</span><br><span class="line">     86260</span><br></pre></td></tr></table></figure></p>
<h4 id="1-1-explanation-of-recyclebin"><a href="#1-1-explanation-of-recyclebin" class="headerlink" title="1.1 explanation of recyclebin"></a>1.1 explanation of recyclebin</h4><p>You can find more details in &quot;recyclebin&quot; view:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; select object_name,original_name,operation,DROPTIME,CAN_UNDROP,CAN_PURGE from recyclebin;</span><br><span class="line">OBJECT_NAME				 ORIGINAL_NAME	      OPERATION 	 DROPTIME				CAN_UN CAN_PU</span><br><span class="line">------------------------- -------------------- ------------------ -------------------------------------- ------ ------</span><br><span class="line">BIN$LSJDDhSbBtDgU8g4qMAzSA==$0		 T		      DROP		 2016-03-03:17:31:13			YES    YES</span><br></pre></td></tr></table></figure></p>
<p>Recyclebin can be purged, if you don&#39;t want to keep the dropped in recyclebin, also can issue drop table command with purge options:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">--purge recyclebin</span><br><span class="line">SQL&gt; purge recyclebin;</span><br><span class="line">Recyclebin purged.</span><br><span class="line">SQL&gt; select * from recyclebin;</span><br><span class="line">no rows selected</span><br><span class="line">--drop table with purge option</span><br><span class="line">SQL&gt; create table t as select * from dba_objects;</span><br><span class="line">Table created.</span><br><span class="line">SQL&gt; drop table t purge;</span><br><span class="line">Table dropped.</span><br><span class="line">SQL&gt; show recyclebin;</span><br></pre></td></tr></table></figure></p>
<p>Enable and disable recylebin feature:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">--disable recyclebin, this step need to restart the instance</span><br><span class="line">SQL&gt; alter system set recyclebin=off scope=spfile;</span><br><span class="line">System altered.</span><br><span class="line">SQL&gt; show parameter recyclebin</span><br><span class="line">NAME				     TYPE		    VALUE</span><br><span class="line">------------------- ---------------------- ------------------------------</span><br><span class="line">recyclebin			     string		    OFF</span><br><span class="line">--enable recyclebin, also need to restart the instance</span><br><span class="line">SQL&gt; alter system set recyclebin=on scope=spfile;</span><br></pre></td></tr></table></figure></p>
<p>Multiple version in recyclebin, you may drop a table in couple of times, this action will generate multiple object with the same original name in recyclbin.<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; create table t as select * from dba_objects;</span><br><span class="line">Table created.</span><br><span class="line">SQL&gt; drop table t;</span><br><span class="line">Table dropped.</span><br><span class="line">SQL&gt; create table t as select * from dba_users;</span><br><span class="line">Table created.</span><br><span class="line">SQL&gt; drop table t;</span><br><span class="line">Table dropped.</span><br><span class="line">SQL&gt; create table t as select * from dba_tables;</span><br><span class="line">Table created.</span><br><span class="line">SQL&gt; drop table t;</span><br><span class="line">Table dropped.</span><br><span class="line">SQL&gt; show recyclebin</span><br><span class="line">ORIGINAL NAME	 RECYCLEBIN NAME		OBJECT TYPE  DROP TIME</span><br><span class="line">---------------- ------------------------------ ------------ -------------------</span><br><span class="line">T		 BIN$LSLiyo5tB/LgU8g4qMDT/Q==$0 TABLE	     2016-03-03:17:47:52</span><br><span class="line">T		 BIN$LSLiyo5qB/LgU8g4qMDT/Q==$0 TABLE	     2016-03-03:17:47:38</span><br><span class="line">T		 BIN$LSLiyo5iB/LgU8g4qMDT/Q==$0 TABLE	     2016-03-03:17:47:25</span><br></pre></td></tr></table></figure></p>
<p>As we can see, each dropped table T is assigned a unique name in the recyclebin, if you flashback the dropped table at that time, the most recently dropped table with that original name is retrieved from recyclebin, you also can indicate the unique name to specify the exactly table you want to recover.<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">--specified the unique name</span><br><span class="line">SQL&gt; flashback table &quot;BIN$LSLiyo5iB/LgU8g4qMDT/Q==$0&quot; to before drop;</span><br><span class="line">Flashback complete.</span><br></pre></td></tr></table></figure></p>
<p>Below action should be the most recently dropped table, which unique name is &quot;BIN$LSLiyo5tB/LgU8g4qMDT/Q==$0&quot;, because we recover a same original name, you cannot recover it without indicate the &quot;rename&quot; option, or you should get &quot;ORA-38312: original name is used by an existing object&quot; error<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; flashback table t to before drop rename to t1;</span><br><span class="line">Flashback complete.</span><br><span class="line">SQL&gt; show recyclebin</span><br><span class="line">ORIGINAL NAME	 RECYCLEBIN NAME		OBJECT TYPE  DROP TIME</span><br><span class="line">---------------- ------------------------------ ------------ -------------------</span><br><span class="line">T		 BIN$LSLiyo5qB/LgU8g4qMDT/Q==$0 TABLE	     2016-03-03:17:47:38</span><br></pre></td></tr></table></figure></p>
<h3 id="2-Recover-a-dropped-table-in-DB2"><a href="#2-Recover-a-dropped-table-in-DB2" class="headerlink" title="2. Recover a dropped table in DB2"></a>2. Recover a dropped table in DB2</h3><p>Recovery dropped in DB2 is somewhat more complex than in Oracle. In Oracle 10g and above, if you enable recyclebin feature(default enabled), you can easily take recovery without any downtime, no rman recovery need.<br>But in DB2, you need a backup image to accomplish this task. With backup image, restore the tablespace which the dropped table reside on, and import the data from recover data. Here&#39;s an example.<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[db2v97i@db2srv ~]$ db2 &quot;create table fung.t(id varchar(10),name varchar(20)) in fung&quot;</span><br><span class="line">DB20000I  The SQL command completed successfully.</span><br><span class="line">[db2v97i@db2srv ~]$ db2 &quot;insert into fung.t values(51369,&apos;fung&apos;)&quot;</span><br><span class="line">DB20000I  The SQL command completed successfully.</span><br><span class="line">[db2v97i@db2srv ~]$ db2 terminate</span><br><span class="line">DB20000I  The TERMINATE command completed successfully.</span><br><span class="line">[db2v97i@db2srv ~]$ db2 deactivate db mysample</span><br><span class="line">DB20000I  The DEACTIVATE DATABASE command completed successfully.</span><br><span class="line"></span><br><span class="line">--take a offline backup</span><br><span class="line">[db2v97i@db2srv ~]$ db2 backup db mysample to /db2/backup/db2v97i/mysample/ compress</span><br><span class="line">Backup successful. The timestamp for this backup image is : 20160307161004</span><br><span class="line"></span><br><span class="line">--drop the table T </span><br><span class="line">[db2v97i@db2srv ~]$ db2 drop table fung.t</span><br><span class="line">DB20000I  The SQL command completed successfully.</span><br></pre></td></tr></table></figure></p>
<p>First, try to find out whether the tablespace support &quot;DROPPED TABLE RECOVERY&quot; or not<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[db2v97i@db2srv ~]$ db2 &quot;select substr(TBSPACE,1,20) as TBS,TBSPACETYPE,DROP_RECOVERY from SYSCAT.TABLESPACES&quot;</span><br><span class="line">TBS                  TBSPACETYPE DROP_RECOVERY</span><br><span class="line">-------------------- ----------- -------------</span><br><span class="line">SYSCATSPACE          D           N            </span><br><span class="line">TEMPSPACE1           S           N            </span><br><span class="line">USERSPACE1           D           Y            </span><br><span class="line">IBMDB2SAMPLEREL      D           Y            </span><br><span class="line">SYSTOOLSPACE         D           Y            </span><br><span class="line">SYSTOOLSTMPSPACE     S           N            </span><br><span class="line">FUNG                 D           Y  `</span><br></pre></td></tr></table></figure></p>
<p>Second, find out the dropped table<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[db2v97i@db2srv ~]$ db2 list history dropped table all for mysample</span><br><span class="line">                    List History File for mysample</span><br><span class="line"> Op Obj Timestamp+Sequence Type Dev Earliest Log Current Log  Backup ID</span><br><span class="line"> -- --- ------------------ ---- --- ------------ ------------ --------------</span><br><span class="line">  D  T  20160307161043                                        000000000000f6b800060004 </span><br><span class="line"> ----------------------------------------------------------------------------</span><br><span class="line">  &quot;FUNG    &quot;.&quot;T&quot; resides in 1 tablespace(s):</span><br><span class="line"></span><br><span class="line"> 00001 FUNG</span><br><span class="line"> ----------------------------------------------------------------------------</span><br><span class="line">    Comment: DROP TABLE</span><br><span class="line"> Start Time: 20160307161043</span><br><span class="line">   End Time: 20160307161043</span><br><span class="line">     Status: A</span><br><span class="line"> ----------------------------------------------------------------------------</span><br><span class="line">  EID: 604</span><br><span class="line"></span><br><span class="line"> DDL: CREATE TABLE &quot;FUNG    &quot;.&quot;T&quot; ( &quot;ID&quot; VARCHAR(10) , &quot;NAME&quot; VARCHAR(20) )  IN &quot;FUNG&quot; ;   </span><br><span class="line"> ----------------------------------------------------------------------------</span><br></pre></td></tr></table></figure></p>
<p>From the output, we can retrieve the dropped table name, which tablespace did the table reside on, and the DDL of the table.<br>Third, restore a database-level or tablespace-level backup image taken before the table was dropped.<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">--find out available backup image </span><br><span class="line">[db2v97i@db2srv ~]$ db2 list history backup all for mysample</span><br><span class="line">                    List History File for mysample</span><br><span class="line"> Op Obj Timestamp+Sequence Type Dev Earliest Log Current Log  Backup ID</span><br><span class="line"> -- --- ------------------ ---- --- ------------ ------------ --------------</span><br><span class="line">  B  D  20160307161004001   F    D  S0000380.LOG S0000380.LOG  </span><br><span class="line"> ----------------------------------------------------------------------------</span><br><span class="line">  Contains 5 tablespace(s):</span><br><span class="line"></span><br><span class="line"> 00001 SYSCATSPACE</span><br><span class="line"> 00002 USERSPACE1</span><br><span class="line"> 00003 IBMDB2SAMPLEREL</span><br><span class="line"> 00004 SYSTOOLSPACE</span><br><span class="line"> 00005 FUNG</span><br><span class="line"> ----------------------------------------------------------------------------</span><br><span class="line">    Comment: DB2 BACKUP MYSAMPLE OFFLINE</span><br><span class="line"> Start Time: 20160307161004</span><br><span class="line">   End Time: 20160307161012</span><br><span class="line">     Status: A</span><br><span class="line"> ----------------------------------------------------------------------------</span><br><span class="line">  EID: 602 Location: /db2/backup/db2v97i/mysample</span><br><span class="line"></span><br><span class="line">--execute the restore command</span><br><span class="line">[db2v97i@db2srv ~]$ db2 &quot;restore db mysample tablespace (FUNG) </span><br><span class="line">online from /db2/backup/db2v97i/mysample/ taken at 20160307161004&quot;</span><br><span class="line">DB20000I  The RESTORE DATABASE command completed successfully.</span><br></pre></td></tr></table></figure></p>
<p>Next, create an export directory to which files contaning the table data are to be written, and rollforward to a PIT.<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[db2v97i@db2srv ~]$ mkdir -p /restore</span><br><span class="line">[db2v97i@db2srv ~]$ db2 &quot;ROLLFORWARD DB mysample TO END OF LOGS TABLESPACE </span><br><span class="line">ONLINE RECOVER DROPPED TABLE 000000000000f6b800060004 TO /restore&quot;</span><br><span class="line">                                 Rollforward Status</span><br><span class="line"> Input database alias                   = mysample</span><br><span class="line"> Number of members have returned status = 1</span><br><span class="line"> Member ID                              = 0</span><br><span class="line"> Rollforward status                     = not pending</span><br><span class="line"> Next log file to be read               =</span><br><span class="line"> Log files processed                    =  -</span><br><span class="line"> Last committed transaction             = 2016-03-07-08.10.43.000000 UTC</span><br><span class="line">DB20000I  The ROLLFORWARD command completed successfully.</span><br></pre></td></tr></table></figure></p>
<p>Next, re-create the dropped table (DDL can obtain from list history command ).<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db2 =&gt; CREATE TABLE &quot;FUNG    &quot;.&quot;T&quot; ( &quot;ID&quot; VARCHAR(10) , &quot;NAME&quot; VARCHAR(20) )  IN &quot;FUNG&quot;</span><br><span class="line">DB20000I  The SQL command completed successfully.</span><br></pre></td></tr></table></figure></p>
<p>Finally, we can import the data from restore directory.<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">--import the data from that was export during the roll forward operation into the table</span><br><span class="line">[db2v97i@db2srv ~]$ db2 &quot;IMPORT FROM /restore/NODE0000/data OF DEL INSERT INTO FUNG.T&quot;</span><br><span class="line">SQL3109N  The utility is beginning to load data from file &quot;/restore/NODE0000/data&quot;.</span><br><span class="line">SQL3110N  The utility has completed processing.  &quot;1&quot; rows were read from the input file.</span><br><span class="line">SQL3221W  ...Begin COMMIT WORK. Input Record Count = &quot;1&quot;.</span><br><span class="line">SQL3222W  ...COMMIT of any database changes was successful.</span><br><span class="line">SQL3149N  &quot;1&quot; rows were processed from the input file.  </span><br><span class="line">	  &quot;1&quot; rows were successfully inserted into the table.  &quot;0&quot; rows were rejected.</span><br><span class="line"></span><br><span class="line">Number of rows read         = 1</span><br><span class="line">Number of rows skipped      = 0</span><br><span class="line">Number of rows inserted     = 1</span><br><span class="line">Number of rows updated      = 0</span><br><span class="line">Number of rows rejected     = 0</span><br><span class="line">Number of rows committed    = 1</span><br><span class="line"></span><br><span class="line">[db2v97i@db2srv ~]$ db2 &quot;select * from fung.t&quot;</span><br><span class="line">ID         NAME                </span><br><span class="line">---------- --------------------</span><br><span class="line">51369      fung                </span><br><span class="line">  1 record(s) selected.</span><br></pre></td></tr></table></figure></p>
<h3 id="3-Supplemental"><a href="#3-Supplemental" class="headerlink" title="3. Supplemental"></a>3. Supplemental</h3><p>There&#39;s still one mistaken operation that always happens. Delete table records happens frequently, maybe you delete some records, or you delete all the table records. So, what&#39;s the difference between DB2 and Oracle database while recovering &quot;deleted records&quot;?</p>
<h4 id="3-1-recovering-deleted-records-in-Oracle"><a href="#3-1-recovering-deleted-records-in-Oracle" class="headerlink" title="3.1 recovering deleted records in Oracle"></a>3.1 recovering deleted records in Oracle</h4><p>It&#39;s very simple to use flashback query feature to undo the deleted data in tables. If you didn&#39;t commit the delete command, you also can rollback the delete statement easily.<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; select count(*) from fung.t;</span><br><span class="line">  COUNT(*)</span><br><span class="line">----------</span><br><span class="line">     86260</span><br><span class="line">SQL&gt; !date</span><br><span class="line">Mon Mar  7 19:24:40 CST 2016</span><br></pre></td></tr></table></figure></p>
<p>Now, let&#39;s delete table data and commit it.<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; delete from fung.t;</span><br><span class="line">86260 rows deleted.</span><br><span class="line">SQL&gt; commit;</span><br><span class="line">Commit complete.</span><br></pre></td></tr></table></figure></p>
<p>Undo the delete operation by using flashback query feature:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; select count(*) from fung.t as of timestamp to_timestamp(&apos;2016-03-07 19:24:00&apos;,&apos;yyyy-mm-dd hh24:mi:ss&apos;);</span><br><span class="line">  COUNT(*)</span><br><span class="line">----------</span><br><span class="line">     86260</span><br><span class="line">SQL&gt; insert into fung.t select * from fung.t as of timestamp to_timestamp(&apos;2016-03-07 19:24:00&apos;,&apos;yyyy-mm-dd hh24:mi:ss&apos;);</span><br><span class="line">86260 rows created.</span><br><span class="line">SQL&gt; commit;</span><br><span class="line">Commit complete.</span><br><span class="line">SQL&gt; select count(*) from fung.t;</span><br><span class="line">  COUNT(*)</span><br><span class="line">----------</span><br><span class="line">     86260</span><br></pre></td></tr></table></figure></p>
<p>Data is back. If you don&#39;t know what the exactly deletion time, you can adjust the timestamp until find the proper one. Flashback query feature is based on undo tablespace, if undo tablespace or the parameter <code>undo_retention</code> (value by seconds) not big or long enough, you also may need take a RMAN recovery to undo the detetion.<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; show parameter undo_retention</span><br><span class="line">NAME				     TYPE		    VALUE</span><br><span class="line">------------------------------------ ---------------------- ------------------------------</span><br><span class="line">undo_retention			     integer		    900</span><br></pre></td></tr></table></figure></p>
<h4 id="3-2-recovering-deleted-records-in-DB2"><a href="#3-2-recovering-deleted-records-in-DB2" class="headerlink" title="3.2 recovering deleted records in DB2"></a>3.2 recovering deleted records in DB2</h4><p>DB2 recovery technology is always more complex than Oracle. Oracle can just use flashback feature to recover deleted records. And auto-commit is enable in DB2 by default, if you didn&#39;t disable auto-commit, you cann&#39;t even use rollback to undo the delete command.<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[db2ace@oc7421025535 ~]$ db2 list command options |grep -i commit</span><br><span class="line">   -c    Auto-Commit                               ON</span><br></pre></td></tr></table></figure></p>
<p>In DB2, the best way to recover a deleted table is redirect restore. Let&#39;s simulate a circumstance to explain it.<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">--duplicate a system table structure </span><br><span class="line">[db2v97i@db2srv ~]$ db2 &quot;create table fung.t1 like syscat.tables in FUNG&quot;</span><br><span class="line">DB20000I  The SQL command completed successfully.</span><br><span class="line">--insert some records into the table </span><br><span class="line">[db2v97i@db2srv ~]$ db2 &quot;insert into fung.t1 select * from syscat.tables&quot;</span><br><span class="line">DB20000I  The SQL command completed successfully.</span><br><span class="line">[db2v97i@db2srv ~]$ db2 &quot;select count(*) from fung.t1&quot;</span><br><span class="line">1          </span><br><span class="line">-----------</span><br><span class="line">        502</span><br><span class="line">  1 record(s) selected.</span><br></pre></td></tr></table></figure></p>
<p>I didn&#39;t take any backup after I create this table. I use the previous backup in step 2.<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[db2v97i@db2srv ~]$ date</span><br><span class="line">Mon Mar  7 17:57:00 CST 2016</span><br><span class="line">--delete all the records </span><br><span class="line">[db2v97i@db2srv ~]$ db2 &quot;delete from fung.t1&quot;</span><br><span class="line">DB20000I  The SQL command completed successfully.</span><br><span class="line">[db2v97i@db2srv ~]$ db2 &quot;select count(*) from fung.t1&quot;</span><br><span class="line">1          </span><br><span class="line">-----------</span><br><span class="line">          0</span><br><span class="line">  1 record(s) selected.</span><br></pre></td></tr></table></figure></p>
<p>Generate the redirect restore command, I don&#39;t want to pollute current production environment. So I decide restore the DB/Tablespace in another place.<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[db2v97i@db2srv ~]$ db2 &quot;restore db mysample rebuild with tablespace (SYSCATSPACE,FUNG) </span><br><span class="line">from /db2/backup/db2v97i/mysample/ taken at 20160307161004 redirect generate script redirect.clp&quot;</span><br><span class="line">DB20000I  The RESTORE DATABASE command completed successfully.</span><br></pre></td></tr></table></figure></p>
<p>Edit the redirect.clp file to proper values, modify the DBPATH, LOGPATH and the DBNAME, and execute the restore operation.<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">--change the DBPATH to /restore/mysample</span><br><span class="line">[db2v97i@db2srv ~]$ mkdir -p /restore/mysample</span><br><span class="line">--change the log path to /restore/mysample/log</span><br><span class="line">[db2v97i@db2srv ~]$ mkdir -p /restore/mysample/log</span><br></pre></td></tr></table></figure></p>
<p>After I edited the redirect.clp file, it should like below.<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[db2v97i@db2srv ~]$ grep -v ^- redirect.clp </span><br><span class="line">UPDATE COMMAND OPTIONS USING S ON Z ON MYSAMPLE_NODE0000.out V ON;</span><br><span class="line">SET CLIENT ATTACH_MEMBER  0;</span><br><span class="line">SET CLIENT CONNECT_MEMBER 0;</span><br><span class="line">RESTORE DATABASE MYSAMPLE</span><br><span class="line">REBUILD WITH TABLESPACE (</span><br><span class="line">  &quot;SYSCATSPACE&quot;</span><br><span class="line">, &quot;TEMPSPACE1&quot;</span><br><span class="line">, &quot;SYSTOOLSTMPSPACE&quot;</span><br><span class="line">, &quot;FUNG&quot;</span><br><span class="line">)</span><br><span class="line">FROM &apos;/db2/backup/db2v97i/mysample/&apos;</span><br><span class="line">TAKEN AT 20160307161004</span><br><span class="line">ON &apos;/restore/mysample&apos;</span><br><span class="line">INTO NEWDB</span><br><span class="line">NEWLOGPATH &apos;/restore/mysample/log&apos;</span><br><span class="line">REDIRECT</span><br><span class="line">;</span><br><span class="line">RESTORE DATABASE MYSAMPLE CONTINUE;</span><br></pre></td></tr></table></figure></p>
<p>Redirect the database into NEWDB with rebuild tablespace option:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[db2v97i@db2srv ~]$ db2 -tvf redirect.clp </span><br><span class="line">UPDATE COMMAND OPTIONS USING S ON Z ON MYSAMPLE_NODE0000.out V ON</span><br><span class="line">DB20000I  The UPDATE COMMAND OPTIONS command completed successfully.</span><br><span class="line"></span><br><span class="line">SET CLIENT ATTACH_MEMBER  0</span><br><span class="line">DB20000I  The SET CLIENT command completed successfully.</span><br><span class="line"></span><br><span class="line">SET CLIENT CONNECT_MEMBER 0</span><br><span class="line">DB20000I  The SET CLIENT command completed successfully.</span><br><span class="line"></span><br><span class="line">RESTORE DATABASE MYSAMPLE REBUILD WITH TABLESPACE ( &quot;SYSCATSPACE&quot; , &quot;TEMPSPACE1&quot; , &quot;SYSTOOLSTMPSPACE&quot; , &quot;FUNG&quot; ) FROM &apos;/db2/backup/db2v97i/mysample/&apos; TAKEN AT 20160307161004 ON &apos;/restore/mysample&apos; INTO NEWDB NEWLOGPATH &apos;/restore/mysample/log&apos; REDIRECT</span><br><span class="line">SQL1277W  A redirected restore operation is being performed. During a table space restore, only table spaces being restored can have their paths </span><br><span class="line">reconfigured. During a database restore, storage group storage paths and DMS </span><br><span class="line">table space containers can be reconfigured.</span><br><span class="line">DB20000I  The RESTORE DATABASE command completed successfully.</span><br><span class="line"></span><br><span class="line">RESTORE DATABASE MYSAMPLE CONTINUE</span><br><span class="line">DB20000I  The RESTORE DATABASE command completed successfully.</span><br></pre></td></tr></table></figure></p>
<p>Find out which logs are needed by rollforward operation, and copy those logs file into the new log path:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">[db2v97i@db2srv ~]$ db2 rollforward database newdb QUERY STATUS</span><br><span class="line">                                 Rollforward Status</span><br><span class="line"> Input database alias                   = newdb</span><br><span class="line"> Number of members have returned status = 1</span><br><span class="line"> Member ID                              = 0</span><br><span class="line"> Rollforward status                     = DB  pending</span><br><span class="line"> Next log file to be read               = S0000380.LOG</span><br><span class="line"> Log files processed                    =  -</span><br><span class="line"> Last committed transaction             = 2016-03-07-08.10.12.000000 UTC</span><br><span class="line"></span><br><span class="line">[db2v97i@db2srv ~]$ db2 get db cfg |grep -i log</span><br><span class="line"> Path to log files                                       = /db2/log/db2v97i/mysample/NODE0000/LOGSTREAM0000/</span><br><span class="line"> First active log file                                   = S0000385.LOG</span><br><span class="line"> First log archive method                 (LOGARCHMETH1) = DISK:/db2/arch/mysample/</span><br><span class="line"></span><br><span class="line">[db2v97i@db2srv ~]$ find /db2 -name &quot;S0000380.LOG&quot;</span><br><span class="line">/db2/arch/mysample/db2v97i/MYSAMPLE/NODE0000/LOGSTREAM0000/C0000001/S0000380.LOG</span><br><span class="line">[db2v97i@db2srv ~]$ cp /db2/arch/mysample/db2v97i/MYSAMPLE/NODE0000/LOGSTREAM0000/C0000001/S000038*.LOG \</span><br><span class="line">/restore/mysample/log/NODE0000/LOGSTREAM0000/</span><br><span class="line">[db2v97i@db2srv ~]$ cp /db2/log/db2v97i/mysample/NODE0000/LOGSTREAM0000/S0000385.LOG \</span><br><span class="line">/restore/mysample/log/NODE0000/LOGSTREAM0000/</span><br><span class="line">[db2v97i@db2srv ~]$ db2 &quot;rollforward database newdb to 2016-03-07-17.57.00.000000 USING LOCAL TIME and stop&quot;</span><br><span class="line">SQL1271W  Database &quot;NEWDB&quot; is recovered but one or more table spaces are </span><br><span class="line">offline on members or nodes &quot;0&quot;.</span><br><span class="line"></span><br><span class="line">[db2v97i@db2srv ~]$ db2 connect to newdb</span><br><span class="line">   Database Connection Information</span><br><span class="line"> Database server        = DB2/LINUXX8664 10.1.5</span><br><span class="line"> SQL authorization ID   = DB2V97I</span><br><span class="line"> Local database alias   = NEWDB</span><br><span class="line"></span><br><span class="line">[db2v97i@db2srv ~]$ db2 &quot;select count(*) from fung.t1&quot;</span><br><span class="line">1          </span><br><span class="line">-----------</span><br><span class="line">        502</span><br><span class="line">  1 record(s) selected.</span><br></pre></td></tr></table></figure></p>
<p>And now, you can export the data from the redirect db to the source db:<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">--export from newdb</span><br><span class="line">[db2v97i@db2srv ~]$ db2 &quot;export to t1.ixf of ixf select * from fung.t1 &quot;</span><br><span class="line">SQL3132W  The character data in column &quot;STATISTICS_PROFILE&quot; will be truncated to size &quot;32700&quot;.</span><br><span class="line">SQL3104N  The Export utility is beginning to export data to file &quot;t1.ixf&quot;.</span><br><span class="line">SQL3105N  The Export utility has finished exporting &quot;502&quot; rows.</span><br><span class="line">Number of rows exported: 502</span><br><span class="line"></span><br><span class="line">--import to sourcedb</span><br><span class="line">[db2v97i@db2srv ~]$ db2 terminate</span><br><span class="line">DB20000I  The TERMINATE command completed successfully.</span><br><span class="line"></span><br><span class="line">[db2v97i@db2srv ~]$ db2 connect to mysample</span><br><span class="line">   Database Connection Information</span><br><span class="line"> Database server        = DB2/LINUXX8664 10.1.5</span><br><span class="line"> SQL authorization ID   = DB2V97I</span><br><span class="line"> Local database alias   = MYSAMPLE</span><br><span class="line">[db2v97i@db2srv ~]$ db2 &quot;select count(*) from fung.t1&quot;</span><br><span class="line">1          </span><br><span class="line">-----------</span><br><span class="line">          0</span><br><span class="line">  1 record(s) selected.</span><br><span class="line"></span><br><span class="line">[db2v97i@db2srv ~]$ db2 &quot;import from t1.ixf of ixf allow write access insert into fung.t1&quot;</span><br><span class="line">SQL3150N  The H record in the PC/IXF file has product &quot;DB2    02.00&quot;, date &quot;20160307&quot;, and time &quot;190757&quot;.</span><br><span class="line">SQL3153N  The T record in the PC/IXF file has name &quot;t1.ixf&quot;, qualifier &quot;&quot;, and source &quot;            &quot;.</span><br><span class="line">SQL3109N  The utility is beginning to load data from file &quot;t1.ixf&quot;.</span><br><span class="line">SQL3110N  The utility has completed processing.  &quot;502&quot; rows were read from the input file.</span><br><span class="line">SQL3221W  ...Begin COMMIT WORK. Input Record Count = &quot;502&quot;.</span><br><span class="line">SQL3222W  ...COMMIT of any database changes was successful.</span><br><span class="line">SQL3149N  &quot;502&quot; rows were processed from the input file.  </span><br><span class="line">	  &quot;502&quot; rows were successfully inserted into the table.  &quot;0&quot; rows were rejected.</span><br><span class="line"></span><br><span class="line">Number of rows read         = 502</span><br><span class="line">Number of rows skipped      = 0</span><br><span class="line">Number of rows inserted     = 502</span><br><span class="line">Number of rows updated      = 0</span><br><span class="line">Number of rows rejected     = 0</span><br><span class="line">Number of rows committed    = 502</span><br><span class="line"></span><br><span class="line">[db2v97i@db2srv ~]$ db2 &quot;select count(*) from fung.t1&quot;</span><br><span class="line">1          </span><br><span class="line">-----------</span><br><span class="line">        502</span><br><span class="line">  1 record(s) selected.</span><br></pre></td></tr></table></figure></p>
<h3 id="4-summary"><a href="#4-summary" class="headerlink" title="4. summary"></a>4. summary</h3><p>Recover a deleted table is very simple in Oracle, but you need recover it as soon as possible, because depends on your production environment, no one knows how long will the undo data retain in the undo tablespace. So when you created your database, modify the parameter &quot;undo_retention&quot; to meet your business requirments.<br>In DB2, the &quot;dropped table recovery&quot; feature do not support export XML column, so when recovering this type of data, PIT recovery should be a better choice. Besides, import will generate lots of logs and may have big impact of performance, when loading large tables into the source db, db2 LOAD utilities will be more suitable. </p>
<p><b>EOF</b><br></p>

    
    </div>
    
    <div class="columns is-variable is-1 is-multiline is-mobile">
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/recover/">#recover</a></span>
    
    </div>
    
    
    <div class="columns is-mobile is-multiline article-nav">
        <span class="column is-12-mobile is-half-desktop  article-nav-prev">
            
            <a href="/hadr-in-db2.html">HADR in DB2</a>
            
        </span>
        <span class="column is-12-mobile is-half-desktop  article-nav-next">
            
            <a href="/upgrade-and-fixpack-db2-database.html">Upgrade and fix pack db2 database</a>
            
        </span>
    </div>
    
</article>




    </div>
</section>
    <footer class="footer footer-padding">
    <div class="container content">
            <div class="column is-narrow has-text-centered is-size-7-mobile">
                &copy; 2013 - 2018
                <a href="/">Kyun Kong&nbsp;
                </a>
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
            </div>
    </div>
</footer>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script>

<!-- test if the browser is outdated -->
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        // plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script>

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
    moment.locale("en-AU");
</script>


    
    
    
    
    
    

    


<script src="/js/script.js"></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-mask"></div>
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js"></script>
    
</body>
</html>