<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head>
    <meta charset="utf-8">
<title>Deinstall Oracle 11g RAC - My Notebook</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css">


<meta name="description" content="Oracle memoranda">



<meta name="keywords" content="oracle, database">







<link rel="icon" href="/images/favicon.ico">


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro|Calibri|Ubuntu">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">



<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">

<link rel="stylesheet" href="/css/style.css">

<script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script>


    
    
    
    
    
    

    


</head>
<body>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/">
                
                    
                    My Notebook
                    
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item "
               href="/">Home</a>
            
            <a class="navbar-item "
               href="/about">About</a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            <a class="navbar-item search" title="Search" href="javascript:;">
                <i class="fas fa-search"></i>
            </a>
            
            
            
        </div>
    </div>
</nav>

    <section class="section">
    <div class="container">
    <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            Deinstall Oracle 11g RAC
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2014-03-30T06:00:00.000Z" itemprop="datePublished">Mar 30 2014</time>
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/categories/oracle/">oracle</a>
                    <span id="busuanzi_container_page_pv" style='display:none'>
Viewed <span id="busuanzi_value_page_pv"></span> times.
</span>
        </span>
        
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
         11g提供了deinstall工具对11g数据库进行删除，以RAC为例，删除步骤为：先删除database，再删除database软件，最后以gi用户删除Grid Infrastructure软件。<br>
<a id="more"></a>
 1.以oracle用户登录，调用dbca删除database<br>

 2.以oracle用户登录，进入$ORACLE_HOME/deintall/，执行deinstall脚本
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br></pre></td><td class="code"><pre><span class="line">[oracle@oel1:/home/oracle]$ /u01/app/oracle/product/11.2.0/db_1/deinstall/deinstall</span><br><span class="line">Checking for required files and bootstrapping ...</span><br><span class="line">Please wait ...</span><br><span class="line">Location of logs /u01/app/oracle/oraInventory/logs/</span><br><span class="line"></span><br><span class="line"> ############ ORACLE DEINSTALL &amp; DECONFIG TOOL START ############</span><br><span class="line"></span><br><span class="line"> ######################### CHECK OPERATION START #########################</span><br><span class="line">## [START] Install check configuration ##</span><br><span class="line"></span><br><span class="line">Checking for existence of the Oracle home location /u01/app/oracle/product/11.2.0/db_1</span><br><span class="line">Oracle Home type selected for deinstall is: Oracle Real Application Cluster Database</span><br><span class="line">Oracle Base selected for deinstall is: /u01/app/oracle</span><br><span class="line">Checking for existence of central inventory location /u01/app/oracle/oraInventory</span><br><span class="line">Checking for existence of the Oracle Grid Infrastructure home /u01/app/11gr2/grid</span><br><span class="line">The following nodes are part of this cluster: oel1,oel2</span><br><span class="line">Checking for sufficient temp space availability on node(s) : &apos;oel1,oel2&apos;</span><br><span class="line"></span><br><span class="line"> ## [END] Install check configuration ##</span><br><span class="line"></span><br><span class="line"> Network Configuration check config START</span><br><span class="line"></span><br><span class="line"> Network de-configuration trace file location: /u01/app/oracle/oraInventory/logs/netdc_check2014-03-29_11-21-30-PM.log</span><br><span class="line"></span><br><span class="line"> Specify all RAC listeners (do not include SCAN listener) that are to be de-configured [ORCL_LISTENER]:</span><br><span class="line"></span><br><span class="line"> Network Configuration check config END</span><br><span class="line"></span><br><span class="line"> Database Check Configuration START</span><br><span class="line"></span><br><span class="line"> Database de-configuration trace file location: /u01/app/oracle/oraInventory/logs/databasedc_check2014-03-29_11-21-39-PM.log</span><br><span class="line"></span><br><span class="line"> Use comma as separator when specifying list of values as input</span><br><span class="line"></span><br><span class="line"> Specify the list of database names that are configured in this Oracle home []: orcl</span><br><span class="line"></span><br><span class="line"> ###### For Database &apos;orcl&apos; ######</span><br><span class="line"></span><br><span class="line"> Specify the type of this database (1.Single Instance Database|2.Oracle Restart Enabled Database|3.RAC Database|4.RAC One Node Database) [2]: 3</span><br><span class="line">Specify the list of nodes on which this database has instances []: oel1,oel2</span><br><span class="line">Specify the list of instance names [orcl]: orcl1,orcl2</span><br><span class="line">Specify the local instance name on node   []: orcl1</span><br><span class="line">Specify the diagnostic destination location of the database [/u01/app/oracle/diag/rdbms/orcl]:</span><br><span class="line">Specify the storage type used by the Database ASM|FS []: ASM</span><br><span class="line"></span><br><span class="line"> Database Check Configuration END</span><br><span class="line"></span><br><span class="line"> Enterprise Manager Configuration Assistant START</span><br><span class="line"></span><br><span class="line"> EMCA de-configuration trace file location: /u01/app/oracle/oraInventory/logs/emcadc_check2014-03-29_11-22-27-PM.log</span><br><span class="line"></span><br><span class="line"> Checking configuration for database orcl</span><br><span class="line">Enterprise Manager Configuration Assistant END</span><br><span class="line">Oracle Configuration Manager check START</span><br><span class="line">OCM check log file location : /u01/app/oracle/oraInventory/logs//ocm_check6234.log</span><br><span class="line">Oracle Configuration Manager check END</span><br><span class="line"></span><br><span class="line"> ######################### CHECK OPERATION END #########################</span><br><span class="line"></span><br><span class="line"> ####################### CHECK OPERATION SUMMARY #######################</span><br><span class="line">Oracle Grid Infrastructure Home is: /u01/app/11gr2/grid</span><br><span class="line">The cluster node(s) on which the Oracle home deinstallation will be performed are:oel1,oel2</span><br><span class="line">Oracle Home selected for deinstall is: /u01/app/oracle/product/11.2.0/db_1</span><br><span class="line">Inventory Location where the Oracle home registered is: /u01/app/oracle/oraInventory</span><br><span class="line">Following RAC listener(s) will be de-configured: ORCL_LISTENER</span><br><span class="line">The following databases were selected for de-configuration : orcl</span><br><span class="line">Database unique name : orcl</span><br><span class="line">Storage used : ASM</span><br><span class="line">No Enterprise Manager configuration to be updated for any database(s)</span><br><span class="line">No Enterprise Manager ASM targets to update</span><br><span class="line">No Enterprise Manager listener targets to migrate</span><br><span class="line">Checking the config status for CCR</span><br><span class="line">oel1 : Oracle Home exists with CCR directory, but CCR is not configured</span><br><span class="line">oel2 : Oracle Home exists with CCR directory, but CCR is not configured</span><br><span class="line">CCR check is finished</span><br><span class="line">Do you want to continue (y - yes, n - no)? [n]: y</span><br><span class="line">A log of this session will be written to: &apos;/u01/app/oracle/oraInventory/logs/deinstall_deconfig2014-03-29_11-21-05-PM.out&apos;</span><br><span class="line">Any error messages from this session will be written to: &apos;/u01/app/oracle/oraInventory/logs/deinstall_deconfig2014-03-29_11-21-05-PM.err&apos;</span><br><span class="line"></span><br><span class="line"> ######################## CLEAN OPERATION START ########################</span><br><span class="line"></span><br><span class="line"> Enterprise Manager Configuration Assistant START</span><br><span class="line"></span><br><span class="line"> EMCA de-configuration trace file location: /u01/app/oracle/oraInventory/logs/emcadc_clean2014-03-29_11-22-27-PM.log</span><br><span class="line"></span><br><span class="line"> Updating Enterprise Manager ASM targets (if any)</span><br><span class="line">Updating Enterprise Manager listener targets (if any)</span><br><span class="line">Enterprise Manager Configuration Assistant END</span><br><span class="line">Database de-configuration trace file location: /u01/app/oracle/oraInventory/logs/databasedc_clean2014-03-29_11-22-37-PM.log</span><br><span class="line">Database Clean Configuration START orcl</span><br><span class="line">This operation may take few minutes.</span><br><span class="line">Database Clean Configuration END orcl</span><br><span class="line"></span><br><span class="line"> Network Configuration clean config START</span><br><span class="line"></span><br><span class="line"> Network de-configuration trace file location: /u01/app/oracle/oraInventory/logs/netdc_clean2014-03-29_11-23-20-PM.log</span><br><span class="line"></span><br><span class="line"> De-configuring RAC listener(s): ORCL_LISTENER</span><br><span class="line"></span><br><span class="line"> De-configuring listener: ORCL_LISTENER</span><br><span class="line">    Stopping listener: ORCL_LISTENER</span><br><span class="line">    Listener stopped successfully.</span><br><span class="line">    Unregistering listener: ORCL_LISTENER</span><br><span class="line">    Listener unregistered successfully.</span><br><span class="line">Listener de-configured successfully.</span><br><span class="line"></span><br><span class="line"> De-configuring Listener configuration file on all nodes...</span><br><span class="line">Listener configuration file de-configured successfully.</span><br><span class="line"></span><br><span class="line"> De-configuring Naming Methods configuration file on all nodes...</span><br><span class="line">Naming Methods configuration file de-configured successfully.</span><br><span class="line"></span><br><span class="line"> De-configuring Local Net Service Names configuration file on all nodes...</span><br><span class="line">Local Net Service Names configuration file de-configured successfully.</span><br><span class="line"></span><br><span class="line"> De-configuring Directory Usage configuration file on all nodes...</span><br><span class="line">Directory Usage configuration file de-configured successfully.</span><br><span class="line"></span><br><span class="line"> De-configuring backup files on all nodes...</span><br><span class="line">Backup files de-configured successfully.</span><br><span class="line"></span><br><span class="line"> The network configuration has been cleaned up successfully.</span><br><span class="line"></span><br><span class="line"> Network Configuration clean config END</span><br><span class="line"></span><br><span class="line"> Oracle Configuration Manager clean START</span><br><span class="line">OCM clean log file location : /u01/app/oracle/oraInventory/logs//ocm_clean6234.log</span><br><span class="line">Oracle Configuration Manager clean END</span><br><span class="line">Setting the force flag to false</span><br><span class="line">Setting the force flag to cleanup the Oracle Base</span><br><span class="line">Oracle Universal Installer clean START</span><br><span class="line"></span><br><span class="line"> Detach Oracle home &apos;/u01/app/oracle/product/11.2.0/db_1&apos; from the central inventory on the local node : Done</span><br><span class="line"></span><br><span class="line"> Delete directory &apos;/u01/app/oracle/product/11.2.0/db_1&apos; on the local node : Done</span><br><span class="line"></span><br><span class="line"> The Oracle Base directory &apos;/u01/app/oracle&apos; will not be removed on local node. The directory is in use by Oracle Home &apos;/u01/app/oracle/product/crs&apos;.</span><br><span class="line"></span><br><span class="line"> The Oracle Base directory &apos;/u01/app/oracle&apos; will not be removed on local node. The directory is in use by central inventory.</span><br><span class="line"></span><br><span class="line"> Detach Oracle home &apos;/u01/app/oracle/product/11.2.0/db_1&apos; from the central inventory on the remote nodes &apos;oel2&apos; : Done</span><br><span class="line"></span><br><span class="line"> Delete directory &apos;/u01/app/oracle/product/11.2.0/db_1&apos; on the remote nodes &apos;oel2&apos; : Done</span><br><span class="line"></span><br><span class="line"> The Oracle Base directory &apos;/u01/app/oracle&apos; will not be removed on node &apos;oel2&apos;. The directory is in use by Oracle Home &apos;/u01/app/oracle/product/crs&apos;.</span><br><span class="line"></span><br><span class="line"> The Oracle Base directory &apos;/u01/app/oracle&apos; will not be removed on node &apos;oel2&apos;. The directory is in use by central inventory.</span><br><span class="line"></span><br><span class="line"> Oracle Universal Installer cleanup was successful.</span><br><span class="line"></span><br><span class="line"> Oracle Universal Installer clean END</span><br><span class="line"></span><br><span class="line"> ## [START] Oracle install clean ##</span><br><span class="line"></span><br><span class="line"> Clean install operation removing temporary directory &apos;/tmp/deinstall2014-03-29_11-18-22PM&apos; on node &apos;oel1&apos;</span><br><span class="line">Clean install operation removing temporary directory &apos;/tmp/deinstall2014-03-29_11-18-22PM&apos; on node &apos;oel2&apos;</span><br><span class="line"></span><br><span class="line"> ## [END] Oracle install clean ##</span><br><span class="line"></span><br><span class="line"> ######################### CLEAN OPERATION END #########################</span><br><span class="line"></span><br><span class="line"> ####################### CLEAN OPERATION SUMMARY #######################</span><br><span class="line">Successfully de-configured the following database instances : orcl</span><br><span class="line">Following RAC listener(s) were de-configured successfully: ORCL_LISTENER</span><br><span class="line">Cleaning the config for CCR</span><br><span class="line">As CCR is not configured, so skipping the cleaning of CCR configuration</span><br><span class="line">CCR clean is finished</span><br><span class="line">Successfully detached Oracle home &apos;/u01/app/oracle/product/11.2.0/db_1&apos; from the central inventory on the local node.</span><br><span class="line">Successfully deleted directory &apos;/u01/app/oracle/product/11.2.0/db_1&apos; on the local node.</span><br><span class="line">Successfully detached Oracle home &apos;/u01/app/oracle/product/11.2.0/db_1&apos; from the central inventory on the remote nodes &apos;oel2&apos;.</span><br><span class="line">Successfully deleted directory &apos;/u01/app/oracle/product/11.2.0/db_1&apos; on the remote nodes &apos;oel2&apos;.</span><br><span class="line">Oracle Universal Installer cleanup was successful.</span><br><span class="line"></span><br><span class="line"> Run &apos;rm -rf /opt/ORCLfmap&apos; as root on node(s) &apos;oel2&apos; at the end of the session.</span><br><span class="line">Oracle deinstall tool successfully cleaned up temporary directories.</span><br><span class="line">#######################################################################</span><br><span class="line"></span><br><span class="line"> ############# ORACLE DEINSTALL &amp; DECONFIG TOOL END #############</span><br><span class="line"></span><br><span class="line"> [oracle@oel1:/home/oracle]$</span><br><span class="line">[oracle@oel1:/home/oracle]$ ll /u01/app/oracle/product/11.2.0/</span><br><span class="line">total 0</span><br><span class="line">[root@oel2:/root]# rm -rf /opt/ORCLfmap</span><br></pre></td></tr></table></figure>

3.以root用户登录节点1，执行以下脚本
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">[root@oel1:/root]# /u01/app/11gr2/grid/crs/install/rootcrs.pl -verbose -deconfig –force</span><br><span class="line">Using configuration parameter file: /u01/app/11gr2/grid/crs/install/crsconfig_params</span><br><span class="line">Network exists: 1/192.168.56.0/255.255.255.0/eth0, type static</span><br><span class="line">VIP exists: /orcl1-vip/192.168.56.125/192.168.56.0/255.255.255.0/eth0, hosting node oel1</span><br><span class="line">VIP exists: /orcl2-vip/192.168.56.126/192.168.56.0/255.255.255.0/eth0, hosting node oel2</span><br><span class="line">GSD exists</span><br><span class="line">ONS exists: Local port 6100, remote port 6200, EM port 2016</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.registry.acfs&apos; on &apos;oel1&apos;</span><br><span class="line">CRS-2677: Stop of &apos;ora.registry.acfs&apos; on &apos;oel1&apos; succeeded</span><br><span class="line">CRS-2791: Starting shutdown of Oracle High Availability Services-managed resources on &apos;oel1&apos;</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.crsd&apos; on &apos;oel1&apos;</span><br><span class="line">CRS-2790: Starting shutdown of Cluster Ready Services-managed resources on &apos;oel1&apos;</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.DATA.dg&apos; on &apos;oel1&apos;</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.OCR.dg&apos; on &apos;oel1&apos;</span><br><span class="line">CRS-2677: Stop of &apos;ora.DATA.dg&apos; on &apos;oel1&apos; succeeded</span><br><span class="line">CRS-2677: Stop of &apos;ora.OCR.dg&apos; on &apos;oel1&apos; succeeded</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.asm&apos; on &apos;oel1&apos;</span><br><span class="line">CRS-2677: Stop of &apos;ora.asm&apos; on &apos;oel1&apos; succeeded</span><br><span class="line">CRS-2792: Shutdown of Cluster Ready Services-managed resources on &apos;oel1&apos; has completed</span><br><span class="line">CRS-2677: Stop of &apos;ora.crsd&apos; on &apos;oel1&apos; succeeded</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.drivers.acfs&apos; on &apos;oel1&apos;</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.ctssd&apos; on &apos;oel1&apos;</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.evmd&apos; on &apos;oel1&apos;</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.asm&apos; on &apos;oel1&apos;</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.mdnsd&apos; on &apos;oel1&apos;</span><br><span class="line">CRS-2677: Stop of &apos;ora.evmd&apos; on &apos;oel1&apos; succeeded</span><br><span class="line">CRS-2677: Stop of &apos;ora.ctssd&apos; on &apos;oel1&apos; succeeded</span><br><span class="line">CRS-2677: Stop of &apos;ora.mdnsd&apos; on &apos;oel1&apos; succeeded</span><br><span class="line">CRS-2677: Stop of &apos;ora.drivers.acfs&apos; on &apos;oel1&apos; succeeded</span><br><span class="line">CRS-2677: Stop of &apos;ora.asm&apos; on &apos;oel1&apos; succeeded</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.cluster_interconnect.haip&apos; on &apos;oel1&apos;</span><br><span class="line">CRS-2677: Stop of &apos;ora.cluster_interconnect.haip&apos; on &apos;oel1&apos; succeeded</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.cssd&apos; on &apos;oel1&apos;</span><br><span class="line">CRS-2677: Stop of &apos;ora.cssd&apos; on &apos;oel1&apos; succeeded</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.crf&apos; on &apos;oel1&apos;</span><br><span class="line">CRS-2677: Stop of &apos;ora.crf&apos; on &apos;oel1&apos; succeeded</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.gipcd&apos; on &apos;oel1&apos;</span><br><span class="line">CRS-2677: Stop of &apos;ora.gipcd&apos; on &apos;oel1&apos; succeeded</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.gpnpd&apos; on &apos;oel1&apos;</span><br><span class="line">CRS-2677: Stop of &apos;ora.gpnpd&apos; on &apos;oel1&apos; succeeded</span><br><span class="line">CRS-2793: Shutdown of Oracle High Availability Services-managed resources on &apos;oel1&apos; has completed</span><br><span class="line">CRS-4133: Oracle High Availability Services has been stopped.</span><br><span class="line">Removing Trace File Analyzer</span><br><span class="line">Successfully deconfigured Oracle clusterware stack on this node</span><br><span class="line">[root@oel1:/root]#</span><br></pre></td></tr></table></figure>

4.在第二个节点，以root用户执行以下脚本，以清除OCR及votedisk信息
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">[root@oel2:/root]# /u01/app/11gr2/grid/crs/install/rootcrs.pl -verbose -deconfig -force -lastnode</span><br><span class="line">Using configuration parameter file: /u01/app/11gr2/grid/crs/install/crsconfig_params</span><br><span class="line">CRS resources for listeners are still configured</span><br><span class="line">Network exists: 1/192.168.56.0/255.255.255.0/eth0, type static</span><br><span class="line">VIP exists: /orcl2-vip/192.168.56.126/192.168.56.0/255.255.255.0/eth0, hosting node oel2</span><br><span class="line">GSD exists</span><br><span class="line">ONS exists: Local port 6100, remote port 6200, EM port 2016</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.registry.acfs&apos; on &apos;oel2&apos;</span><br><span class="line">CRS-2677: Stop of &apos;ora.registry.acfs&apos; on &apos;oel2&apos; succeeded</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.crsd&apos; on &apos;oel2&apos;</span><br><span class="line">CRS-2790: Starting shutdown of Cluster Ready Services-managed resources on &apos;oel2&apos;</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.DATA.dg&apos; on &apos;oel2&apos;</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.OCR.dg&apos; on &apos;oel2&apos;</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.oc4j&apos; on &apos;oel2&apos;</span><br><span class="line">CRS-2677: Stop of &apos;ora.DATA.dg&apos; on &apos;oel2&apos; succeeded</span><br><span class="line">CRS-2677: Stop of &apos;ora.OCR.dg&apos; on &apos;oel2&apos; succeeded</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.asm&apos; on &apos;oel2&apos;</span><br><span class="line">CRS-2677: Stop of &apos;ora.asm&apos; on &apos;oel2&apos; succeeded</span><br><span class="line">CRS-2677: Stop of &apos;ora.oc4j&apos; on &apos;oel2&apos; succeeded</span><br><span class="line">CRS-2792: Shutdown of Cluster Ready Services-managed resources on &apos;oel2&apos; has completed</span><br><span class="line">CRS-2677: Stop of &apos;ora.crsd&apos; on &apos;oel2&apos; succeeded</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.ctssd&apos; on &apos;oel2&apos;</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.evmd&apos; on &apos;oel2&apos;</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.asm&apos; on &apos;oel2&apos;</span><br><span class="line">CRS-2677: Stop of &apos;ora.evmd&apos; on &apos;oel2&apos; succeeded</span><br><span class="line">CRS-2677: Stop of &apos;ora.asm&apos; on &apos;oel2&apos; succeeded</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.cluster_interconnect.haip&apos; on &apos;oel2&apos;</span><br><span class="line">CRS-2677: Stop of &apos;ora.cluster_interconnect.haip&apos; on &apos;oel2&apos; succeeded</span><br><span class="line">CRS-2677: Stop of &apos;ora.ctssd&apos; on &apos;oel2&apos; succeeded</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.cssd&apos; on &apos;oel2&apos;</span><br><span class="line">CRS-2677: Stop of &apos;ora.cssd&apos; on &apos;oel2&apos; succeeded</span><br><span class="line">CRS-2672: Attempting to start &apos;ora.cssdmonitor&apos; on &apos;oel2&apos;</span><br><span class="line">CRS-2676: Start of &apos;ora.cssdmonitor&apos; on &apos;oel2&apos; succeeded</span><br><span class="line">CRS-2672: Attempting to start &apos;ora.cssd&apos; on &apos;oel2&apos;</span><br><span class="line">CRS-2672: Attempting to start &apos;ora.diskmon&apos; on &apos;oel2&apos;</span><br><span class="line">CRS-2676: Start of &apos;ora.diskmon&apos; on &apos;oel2&apos; succeeded</span><br><span class="line">CRS-2676: Start of &apos;ora.cssd&apos; on &apos;oel2&apos; succeeded</span><br><span class="line">CRS-4611: Successful deletion of voting disk +OCR.</span><br><span class="line">ASM de-configuration trace file location: /tmp/asmcadc_clean2014-03-29_11-48-42-PM.log</span><br><span class="line">ASM Clean Configuration START</span><br><span class="line">ASM Clean Configuration END</span><br><span class="line"></span><br><span class="line"> ASM with SID +ASM1 deleted successfully. Check /tmp/asmcadc_clean2014-03-29_11-48-42-PM.log for details.</span><br><span class="line"></span><br><span class="line"> CRS-2791: Starting shutdown of Oracle High Availability Services-managed resources on &apos;oel2&apos;</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.mdnsd&apos; on &apos;oel2&apos;</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.crf&apos; on &apos;oel2&apos;</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.ctssd&apos; on &apos;oel2&apos;</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.asm&apos; on &apos;oel2&apos;</span><br><span class="line">CRS-2677: Stop of &apos;ora.crf&apos; on &apos;oel2&apos; succeeded</span><br><span class="line">CRS-2677: Stop of &apos;ora.mdnsd&apos; on &apos;oel2&apos; succeeded</span><br><span class="line">CRS-2677: Stop of &apos;ora.ctssd&apos; on &apos;oel2&apos; succeeded</span><br><span class="line">CRS-2677: Stop of &apos;ora.asm&apos; on &apos;oel2&apos; succeeded</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.cluster_interconnect.haip&apos; on &apos;oel2&apos;</span><br><span class="line">CRS-2677: Stop of &apos;ora.cluster_interconnect.haip&apos; on &apos;oel2&apos; succeeded</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.cssd&apos; on &apos;oel2&apos;</span><br><span class="line">CRS-2677: Stop of &apos;ora.cssd&apos; on &apos;oel2&apos; succeeded</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.gipcd&apos; on &apos;oel2&apos;</span><br><span class="line">CRS-2677: Stop of &apos;ora.gipcd&apos; on &apos;oel2&apos; succeeded</span><br><span class="line">CRS-2673: Attempting to stop &apos;ora.gpnpd&apos; on &apos;oel2&apos;</span><br><span class="line">CRS-2677: Stop of &apos;ora.gpnpd&apos; on &apos;oel2&apos; succeeded</span><br><span class="line">CRS-2793: Shutdown of Oracle High Availability Services-managed resources on &apos;oel2&apos; has completed</span><br><span class="line">CRS-4133: Oracle High Availability Services has been stopped.</span><br><span class="line">Removing Trace File Analyzer</span><br><span class="line">Successfully deconfigured Oracle clusterware stack on this node</span><br></pre></td></tr></table></figure>

5.以GI用户(grid)删除GI软件
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line">[grid@oel1:/home/grid]$ /u01/app/11gr2/grid/deinstall/deinstall</span><br><span class="line">Checking for required files and bootstrapping ...</span><br><span class="line">Please wait ...</span><br><span class="line">Location of logs /u01/app/oracle/oraInventory/logs/</span><br><span class="line"></span><br><span class="line"> ############ ORACLE DEINSTALL &amp; DECONFIG TOOL START ############</span><br><span class="line"></span><br><span class="line"> ######################### CHECK OPERATION START #########################</span><br><span class="line">## [START] Install check configuration ##</span><br><span class="line"></span><br><span class="line"> Checking for existence of the Oracle home location /u01/app/11gr2/grid</span><br><span class="line">Oracle Home type selected for deinstall is: Oracle Grid Infrastructure for a Cluster</span><br><span class="line">Oracle Base selected for deinstall is: /u01/app/grid</span><br><span class="line">Checking for existence of central inventory location /u01/app/oracle/oraInventory</span><br><span class="line">Checking for existence of the Oracle Grid Infrastructure home</span><br><span class="line">The following nodes are part of this cluster: oel1,oel2</span><br><span class="line">Checking for sufficient temp space availability on node(s) : &apos;oel1,oel2&apos;</span><br><span class="line"></span><br><span class="line"> ## [END] Install check configuration ##</span><br><span class="line"></span><br><span class="line"> Traces log file: /u01/app/oracle/oraInventory/logs//crsdc.log</span><br><span class="line">Enter an address or the name of the virtual IP used on node &quot;oel1&quot;[null]</span><br><span class="line"> &gt;</span><br><span class="line">orcl1-vip</span><br><span class="line">The following information can be collected by running &quot;/sbin/ifconfig -a&quot; on node &quot;oel1&quot;</span><br><span class="line">Enter the IP netmask of Virtual IP &quot;192.168.56.125&quot; on node &quot;oel1&quot;[255.255.255.0]</span><br><span class="line"> &gt;</span><br><span class="line"></span><br><span class="line"> Enter the network interface name on which the virtual IP address &quot;192.168.56.125&quot; is active</span><br><span class="line"> &gt;</span><br><span class="line">eth0</span><br><span class="line">Enter an address or the name of the virtual IP used on node &quot;oel2&quot;[192.168.56.125]</span><br><span class="line"> &gt;</span><br><span class="line">orcl2-vip</span><br><span class="line">The following information can be collected by running &quot;/sbin/ifconfig -a&quot; on node &quot;oel2&quot;</span><br><span class="line">Enter the IP netmask of Virtual IP &quot;192.168.56.126&quot; on node &quot;oel2&quot;[255.255.255.0]</span><br><span class="line"> &gt;</span><br><span class="line"></span><br><span class="line"> Enter the network interface name on which the virtual IP address &quot;192.168.56.126&quot; is active[eth0]</span><br><span class="line"> &gt;</span><br><span class="line"></span><br><span class="line"> Enter an address or the name of the virtual IP[]</span><br><span class="line"> &gt;</span><br><span class="line"></span><br><span class="line"> Network Configuration check config START</span><br><span class="line"></span><br><span class="line"> Network de-configuration trace file location: /u01/app/oracle/oraInventory/logs/netdc_check2014-03-29_11-55-42-PM.log</span><br><span class="line"></span><br><span class="line"> Specify all RAC listeners (do not include SCAN listener) that are to be de-configured [LISTENER,LISTENER_SCAN3,LISTENER_SCAN2,LISTENER_SCAN1]:</span><br><span class="line"></span><br><span class="line"> Network Configuration check config END</span><br><span class="line"></span><br><span class="line"> Asm Check Configuration START</span><br><span class="line"></span><br><span class="line"> ASM de-configuration trace file location: /u01/app/oracle/oraInventory/logs/asmcadc_check2014-03-29_11-55-50-PM.log</span><br><span class="line"></span><br><span class="line"> ASM configuration was not detected in this Oracle home. Was ASM configured in this Oracle home (y|n) [n]: y</span><br><span class="line">Is OCR/Voting Disk placed in ASM y|n [n]: y</span><br><span class="line"></span><br><span class="line"> Enter the OCR/Voting Disk diskgroup name []: OCR</span><br><span class="line">Specify the ASM Diagnostic Destination [ ]: /u01/app/oracle</span><br><span class="line">Specify the diskstring []: /dev/oracleasm/OCR*</span><br><span class="line">Specify the diskgroups that are managed by this ASM instance []: DATA</span><br><span class="line"></span><br><span class="line"> De-configuring ASM will drop the diskgroups at cleanup time. Do you want deconfig tool to drop the diskgroups y|n [y]:</span><br><span class="line"></span><br><span class="line"> ######################### CHECK OPERATION END #########################</span><br><span class="line"></span><br><span class="line"> ####################### CHECK OPERATION SUMMARY #######################</span><br><span class="line">Oracle Grid Infrastructure Home is:</span><br><span class="line">The cluster node(s) on which the Oracle home deinstallation will be performed are:oel1,oel2</span><br><span class="line">Oracle Home selected for deinstall is: /u01/app/11gr2/grid</span><br><span class="line">Inventory Location where the Oracle home registered is: /u01/app/oracle/oraInventory</span><br><span class="line">Following RAC listener(s) will be de-configured: LISTENER,LISTENER_SCAN3,LISTENER_SCAN2,LISTENER_SCAN1</span><br><span class="line">ASM instance will be de-configured from this Oracle home</span><br><span class="line">Do you want to continue (y - yes, n - no)? [n]: y</span><br><span class="line">A log of this session will be written to: &apos;/u01/app/oracle/oraInventory/logs/deinstall_deconfig2014-03-29_11-53-59-PM.out&apos;</span><br><span class="line">Any error messages from this session will be written to: &apos;/u01/app/oracle/oraInventory/logs/deinstall_deconfig2014-03-29_11-53-59-PM.err&apos;</span><br><span class="line"></span><br><span class="line"> ######################## CLEAN OPERATION START ########################</span><br><span class="line">ASM de-configuration trace file location: /u01/app/oracle/oraInventory/logs/asmcadc_clean2014-03-29_11-57-28-PM.log</span><br><span class="line">ASM Clean Configuration START</span><br><span class="line">ASM Clean Configuration END</span><br><span class="line"></span><br><span class="line"> Network Configuration clean config START</span><br><span class="line"></span><br><span class="line"> Network de-configuration trace file location: /u01/app/oracle/oraInventory/logs/netdc_clean2014-03-29_11-57-33-PM.log</span><br><span class="line"></span><br><span class="line"> De-configuring RAC listener(s): LISTENER,LISTENER_SCAN3,LISTENER_SCAN2,LISTENER_SCAN1</span><br><span class="line"></span><br><span class="line"> De-configuring listener: LISTENER</span><br><span class="line">    Stopping listener: LISTENER</span><br><span class="line">    Warning: Failed to stop listener. Listener may not be running.</span><br><span class="line">Listener de-configured successfully.</span><br><span class="line"></span><br><span class="line"> De-configuring listener: LISTENER_SCAN3</span><br><span class="line">    Stopping listener: LISTENER_SCAN3</span><br><span class="line">    Warning: Failed to stop listener. Listener may not be running.</span><br><span class="line">Listener de-configured successfully.</span><br><span class="line"></span><br><span class="line"> De-configuring listener: LISTENER_SCAN2</span><br><span class="line">    Stopping listener: LISTENER_SCAN2</span><br><span class="line">    Warning: Failed to stop listener. Listener may not be running.</span><br><span class="line">Listener de-configured successfully.</span><br><span class="line"></span><br><span class="line"> De-configuring listener: LISTENER_SCAN1</span><br><span class="line">    Stopping listener: LISTENER_SCAN1</span><br><span class="line">    Warning: Failed to stop listener. Listener may not be running.</span><br><span class="line">Listener de-configured successfully.</span><br><span class="line"></span><br><span class="line"> De-configuring Naming Methods configuration file on all nodes...</span><br><span class="line">Naming Methods configuration file de-configured successfully.</span><br><span class="line"></span><br><span class="line"> De-configuring Local Net Service Names configuration file on all nodes...</span><br><span class="line">Local Net Service Names configuration file de-configured successfully.</span><br><span class="line"></span><br><span class="line"> De-configuring Directory Usage configuration file on all nodes...</span><br><span class="line">Directory Usage configuration file de-configured successfully.</span><br><span class="line"></span><br><span class="line"> De-configuring backup files on all nodes...</span><br><span class="line">Backup files de-configured successfully.</span><br><span class="line"></span><br><span class="line"> The network configuration has been cleaned up successfully.</span><br><span class="line"></span><br><span class="line"> Network Configuration clean config END</span><br><span class="line"></span><br><span class="line"> ----------------------------------------&gt;</span><br><span class="line"></span><br><span class="line"> The deconfig command below can be executed in parallel on all the remote nodes. Execute the command on  the local node after the execution completes on all the remote nodes.</span><br><span class="line"></span><br><span class="line"> Run the following command as the root user or the administrator on node &quot;oel2&quot;.</span><br><span class="line"></span><br><span class="line"> /tmp/deinstall2014-03-29_11-52-47PM/perl/bin/perl -I/tmp/deinstall2014-03-29_11-52-47PM/perl/lib -I/tmp/deinstall2014-03-29_11-52-47PM/crs/install /tmp/deinstall2014-03-29_11-52-47PM/crs/install/rootcrs.pl -force  -deconfig -paramfile &quot;/tmp/deinstall2014-03-29_11-52-47PM/response/deinstall_Ora11g_gridinfrahome1.rsp&quot;</span><br><span class="line"></span><br><span class="line"> Run the following command as the root user or the administrator on node &quot;oel1&quot;.</span><br><span class="line"></span><br><span class="line"> /tmp/deinstall2014-03-29_11-52-47PM/perl/bin/perl -I/tmp/deinstall2014-03-29_11-52-47PM/perl/lib -I/tmp/deinstall2014-03-29_11-52-47PM/crs/install /tmp/deinstall2014-03-29_11-52-47PM/crs/install/rootcrs.pl -force  -deconfig -paramfile &quot;/tmp/deinstall2014-03-29_11-52-47PM/response/deinstall_Ora11g_gridinfrahome1.rsp&quot; -lastnode</span><br><span class="line"></span><br><span class="line"> Press Enter after you finish running the above commands</span><br><span class="line"></span><br><span class="line"> &lt;----------------------------------------</span><br></pre></td></tr></table></figure>

6.保持上述deinstall窗口，分别在两个节点执行上述最后两个脚本，这个脚本可以并行执行
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">node 2:</span><br><span class="line">[root@oel2:/root]# /tmp/deinstall2014-03-29_11-52-47PM/perl/bin/perl -I/tmp/deinstall2014-03-29_11-52-47PM/perl/lib -I/tmp/deinstall2014-03-29_11-52-47PM/crs/install /tmp/deinstall2014-03-29_11-52-47PM/crs/install/rootcrs.pl -force  -deconfig -paramfile &quot;/tmp/deinstall2014-03-29_11-52-47PM/response/deinstall_Ora11g_gridinfrahome1.rsp&quot;</span><br><span class="line">Using configuration parameter file: /tmp/deinstall2014-03-29_11-52-47PM/response/deinstall_Ora11g_gridinfrahome1.rsp</span><br><span class="line">****Unable to retrieve Oracle Clusterware home.</span><br><span class="line">Start Oracle Clusterware stack and try again.</span><br><span class="line">CRS-4047: No Oracle Clusterware components configured.</span><br><span class="line">CRS-4000: Command Stop failed, or completed with errors.</span><br><span class="line">Either /etc/oracle/ocr.loc does not exist or is not readable</span><br><span class="line">Make sure the file exists and it has read and execute access</span><br><span class="line">Either /etc/oracle/ocr.loc does not exist or is not readable</span><br><span class="line">Make sure the file exists and it has read and execute access</span><br><span class="line">CRS-4047: No Oracle Clusterware components configured.</span><br><span class="line">CRS-4000: Command Modify failed, or completed with errors.</span><br><span class="line">CRS-4047: No Oracle Clusterware components configured.</span><br><span class="line">CRS-4000: Command Delete failed, or completed with errors.</span><br><span class="line">CRS-4047: No Oracle Clusterware components configured.</span><br><span class="line">CRS-4000: Command Stop failed, or completed with errors.</span><br><span class="line">################################################################</span><br><span class="line"># You must kill processes or reboot the system to properly #</span><br><span class="line"># cleanup the processes started by Oracle clusterware          #</span><br><span class="line">################################################################</span><br><span class="line">ACFS-9313: No ADVM/ACFS installation detected.</span><br><span class="line">Either /etc/oracle/olr.loc does not exist or is not readable</span><br><span class="line">Make sure the file exists and it has read and execute access</span><br><span class="line">Either /etc/oracle/olr.loc does not exist or is not readable</span><br><span class="line">Make sure the file exists and it has read and execute access</span><br><span class="line">Failure in execution (rc=-1, 256, No such file or directory) for command /etc/init.d/ohasd deinstall</span><br><span class="line">error: package cvuqdisk is not installed</span><br><span class="line">Successfully deconfigured Oracle clusterware stack on this node</span><br><span class="line"></span><br><span class="line"> Node1:</span><br><span class="line">[root@oel1:/root]# /tmp/deinstall2014-03-29_11-52-47PM/perl/bin/perl -I/tmp/deinstall2014-03-29_11-52-47PM/perl/lib -I/tmp/deinstall2014-03-29_11-52-47PM/crs/install /tmp/deinstall2014-03-29_11-52-47PM/crs/install/rootcrs.pl -force  -deconfig -paramfile &quot;/tmp/deinstall2014-03-29_11-52-47PM/response/deinstall_Ora11g_gridinfrahome1.rsp&quot; -lastnode</span><br><span class="line">Using configuration parameter file: /tmp/deinstall2014-03-29_11-52-47PM/response/deinstall_Ora11g_gridinfrahome1.rsp</span><br><span class="line">Adding Clusterware entries to inittab</span><br><span class="line">/crs/install/inittab does not exist.</span><br><span class="line">****Unable to retrieve Oracle Clusterware home.</span><br><span class="line">Start Oracle Clusterware stack and try again.</span><br><span class="line">****Unable to retrieve Oracle Clusterware home.</span><br><span class="line">Start Oracle Clusterware stack and try again.</span><br><span class="line">****Unable to retrieve Oracle Clusterware home.</span><br><span class="line">Start Oracle Clusterware stack and try again.</span><br><span class="line">****Unable to retrieve Oracle Clusterware home.</span><br><span class="line">Start Oracle Clusterware stack and try again.</span><br><span class="line">****Unable to retrieve Oracle Clusterware home.</span><br><span class="line">Start Oracle Clusterware stack and try again.</span><br><span class="line">CRS-4047: No Oracle Clusterware components configured.</span><br><span class="line">CRS-4000: Command Stop failed, or completed with errors.</span><br><span class="line">CRS-4047: No Oracle Clusterware components configured.</span><br><span class="line">CRS-4000: Command Delete failed, or completed with errors.</span><br><span class="line">Either /etc/oracle/ocr.loc does not exist or is not readable</span><br><span class="line">Make sure the file exists and it has read and execute access</span><br><span class="line">Either /etc/oracle/ocr.loc does not exist or is not readable</span><br><span class="line">Make sure the file exists and it has read and execute access</span><br><span class="line">CRS-4047: No Oracle Clusterware components configured.</span><br><span class="line">CRS-4000: Command Modify failed, or completed with errors.</span><br><span class="line">CRS-4047: No Oracle Clusterware components configured.</span><br><span class="line">CRS-4000: Command Delete failed, or completed with errors.</span><br><span class="line">Either /etc/oracle/ocr.loc does not exist or is not readable</span><br><span class="line">Make sure the file exists and it has read and execute access</span><br><span class="line">Either /etc/oracle/ocr.loc does not exist or is not readable</span><br><span class="line">Make sure the file exists and it has read and execute access</span><br><span class="line">CRS-4047: No Oracle Clusterware components configured.</span><br><span class="line">CRS-4000: Command Stop failed, or completed with errors.</span><br><span class="line">Either /etc/oracle/ocr.loc does not exist or is not readable</span><br><span class="line">Make sure the file exists and it has read and execute access</span><br><span class="line">Either /etc/oracle/ocr.loc does not exist or is not readable</span><br><span class="line">Make sure the file exists and it has read and execute access</span><br><span class="line">################################################################</span><br><span class="line"># You must kill processes or reboot the system to properly #</span><br><span class="line"># cleanup the processes started by Oracle clusterware          #</span><br><span class="line">################################################################</span><br><span class="line">Either /etc/oracle/ocr.loc does not exist or is not readable</span><br><span class="line">Make sure the file exists and it has read and execute access</span><br><span class="line">Either /etc/oracle/ocr.loc does not exist or is not readable</span><br><span class="line">Make sure the file exists and it has read and execute access</span><br><span class="line">ACFS-9313: No ADVM/ACFS installation detected.</span><br><span class="line">Either /etc/oracle/olr.loc does not exist or is not readable</span><br><span class="line">Make sure the file exists and it has read and execute access</span><br><span class="line">Either /etc/oracle/olr.loc does not exist or is not readable</span><br><span class="line">Make sure the file exists and it has read and execute access</span><br><span class="line">Failure in execution (rc=-1, 256, No such file or directory) for command /etc/init.d/ohasd deinstall</span><br><span class="line">error: package cvuqdisk is not installed</span><br><span class="line">Successfully deconfigured Oracle clusterware stack on this node</span><br></pre></td></tr></table></figure>

7.回到刚才deinstall窗口，按回车,完成删除动作
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">Press Enter after you finish running the above commands</span><br><span class="line"></span><br><span class="line"> &lt;----------------------------------------</span><br><span class="line"></span><br><span class="line"> Setting the force flag to false</span><br><span class="line">Setting the force flag to cleanup the Oracle Base</span><br><span class="line">Oracle Universal Installer clean START</span><br><span class="line"></span><br><span class="line"> Detach Oracle home &apos;/u01/app/11gr2/grid&apos; from the central inventory on the local node : Done</span><br><span class="line"></span><br><span class="line"> Delete directory &apos;/u01/app/11gr2/grid&apos; on the local node : Done</span><br><span class="line"></span><br><span class="line"> Delete directory &apos;/u01/app/grid&apos; on the local node : Done</span><br><span class="line"></span><br><span class="line"> Detach Oracle home &apos;/u01/app/11gr2/grid&apos; from the central inventory on the remote nodes &apos;oel2&apos; : Done</span><br><span class="line"></span><br><span class="line"> Delete directory &apos;/u01/app/11gr2/grid&apos; on the remote nodes &apos;oel2&apos; : Done</span><br><span class="line"></span><br><span class="line"> Delete directory &apos;/u01/app/grid&apos; on the remote nodes &apos;oel2&apos; : Done</span><br><span class="line"></span><br><span class="line"> Oracle Universal Installer cleanup was successful.</span><br><span class="line"></span><br><span class="line"> Oracle Universal Installer clean END</span><br><span class="line"></span><br><span class="line"> ## [START] Oracle install clean ##</span><br><span class="line"></span><br><span class="line"> Clean install operation removing temporary directory &apos;/tmp/deinstall2014-03-29_11-52-47PM&apos; on node &apos;oel1&apos;</span><br><span class="line">Clean install operation removing temporary directory &apos;/tmp/deinstall2014-03-29_11-52-47PM&apos; on node &apos;oel2&apos;</span><br><span class="line"></span><br><span class="line"> ## [END] Oracle install clean ##</span><br><span class="line"></span><br><span class="line"> ######################### CLEAN OPERATION END #########################</span><br><span class="line"></span><br><span class="line"> ####################### CLEAN OPERATION SUMMARY #######################</span><br><span class="line">ASM instance was de-configured successfully from the Oracle home</span><br><span class="line">Following RAC listener(s) were de-configured successfully: LISTENER,LISTENER_SCAN3,LISTENER_SCAN2,LISTENER_SCAN1</span><br><span class="line">Oracle Clusterware is stopped and successfully de-configured on node &quot;oel1&quot;</span><br><span class="line">Oracle Clusterware is stopped and successfully de-configured on node &quot;oel2&quot;</span><br><span class="line">Oracle Clusterware is stopped and de-configured successfully.</span><br><span class="line">Successfully detached Oracle home &apos;/u01/app/11gr2/grid&apos; from the central inventory on the local node.</span><br><span class="line">Successfully deleted directory &apos;/u01/app/11gr2/grid&apos; on the local node.</span><br><span class="line">Successfully deleted directory &apos;/u01/app/grid&apos; on the local node.</span><br><span class="line">Successfully detached Oracle home &apos;/u01/app/11gr2/grid&apos; from the central inventory on the remote nodes &apos;oel2&apos;.</span><br><span class="line">Successfully deleted directory &apos;/u01/app/11gr2/grid&apos; on the remote nodes &apos;oel2&apos;.</span><br><span class="line">Successfully deleted directory &apos;/u01/app/grid&apos; on the remote nodes &apos;oel2&apos;.</span><br><span class="line">Oracle Universal Installer cleanup was successful.</span><br><span class="line"></span><br><span class="line"> Oracle deinstall tool successfully cleaned up temporary directories.</span><br><span class="line">#######################################################################</span><br><span class="line"></span><br><span class="line"> ############# ORACLE DEINSTALL &amp; DECONFIG TOOL END #############</span><br><span class="line"></span><br><span class="line">[grid@oel1:/home/grid]$</span><br><span class="line"></span><br><span class="line">[root@oel1:/root]# rm -rf /etc/oraInst.loc</span><br><span class="line">[root@oel2:/root]# rm -rf /etc/oraInst.loc</span><br><span class="line">[root@oel1:/root]# rm -rf /opt/ORCLfmap/</span><br></pre></td></tr></table></figure>


    
    </div>
    
    <div class="columns is-variable is-1 is-multiline is-mobile">
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/rac/">#rac</a></span>
    
    </div>
    
    
    <div class="columns is-mobile is-multiline article-nav">
        <span class="column is-12-mobile is-half-desktop  article-nav-prev">
            
            <a href="/oracle-taf.html">oracle TAF</a>
            
        </span>
        <span class="column is-12-mobile is-half-desktop  article-nav-next">
            
            <a href="/10gr2-rac-installation.html">installing 10gr2 rac on linux</a>
            
        </span>
    </div>
    
</article>





    </div>
</section>

    <footer class="footer footer-padding">
    <div class="container content">
            <div class="column is-narrow has-text-centered is-size-7-mobile">
                &copy;  <a href="/">Kyun Kong&nbsp;</a>
                2013 - 2020
            </div>
    </div>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</footer>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script>

<!-- test if the browser is outdated
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        // plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script>
-->

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
    moment.locale("en-AU");
</script>


    
    
    
    
    
    

    


<script src="/js/script.js"></script>


    
    <div class="searchbox ins-search">
    <div class="searchbox-mask"></div>
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js"></script>
    
</body>
</html>