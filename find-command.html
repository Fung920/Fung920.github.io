<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head>
    <meta charset="utf-8">
<title>Linux Find Command - My Notebook</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css">


<meta name="description" content="find command in linux or UNIX">



<meta name="keywords" content="linux,find">







<link rel="icon" href="/images/favicon.ico">


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro|Calibri|Ubuntu">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">



<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">

<link rel="stylesheet" href="/css/style.css">

<script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script>


    
    
    
    
    
    

    


</head>
<body>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/">
                
                    
                    My Notebook
                    
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item "
               href="/">Home</a>
            
            <a class="navbar-item "
               href="/about">About</a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            <a class="navbar-item search" title="Search" href="javascript:;">
                <i class="fas fa-search"></i>
            </a>
            
            
            
        </div>
    </div>
</nav>

    <section class="section">
    <div class="container">
    <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            Linux Find Command
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2014-05-19T07:31:15.000Z" itemprop="datePublished">May 19 2014</time>
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/categories/linux/">linux</a>
                    <span id="busuanzi_container_page_pv" style='display:none'>
Viewd <span id="busuanzi_value_page_pv"></span> times.
</span>
        </span>
        
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <p></p><p>Find在Linux/UNIX中，通过指定某个或者多个目录查找符合执行条件的文件，显示文件名或对这些文件进行特定的操作。</p><br><a id="more"></a><p></p>
<table>
<thead>
<tr>
<th>表达式</th>
<th>参数</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>-type</td>
<td>f/d</td>
<td>查找目标的类型(文件/目录)</td>
</tr>
<tr>
<td>-size</td>
<td>+n/-n/n</td>
<td>文件大小超过/小于/等于n blocks</td>
</tr>
<tr>
<td>-mtime</td>
<td>+/-x</td>
<td>x天以前/x天以内被修改的文件</td>
</tr>
<tr>
<td>-perm</td>
<td>mode</td>
<td>访问指定权限的文件(rwx)</td>
</tr>
<tr>
<td>-user</td>
<td>User</td>
<td>属于用户user的文件</td>
</tr>
<tr>
<td>-o</td>
<td></td>
<td>逻辑&#39;or&#39;</td>
</tr>
</tbody>
</table>
<h3 id="1-查找文件名为oracle的文件，并打印在屏幕上"><a href="#1-查找文件名为oracle的文件，并打印在屏幕上" class="headerlink" title="1.查找文件名为oracle的文件，并打印在屏幕上"></a>1.查找文件名为oracle的文件，并打印在屏幕上</h3><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># ls -l /oracle</span><br><span class="line">total 2580304</span><br><span class="line">-rw-r-----    1 root     system   1321110528 May 16 18:30 10gr2_aix5l64_database.cpio</span><br><span class="line">drwxrwxr-x    4 oracle   oinstall        256 May 16 17:19 app</span><br><span class="line">drwxrwxr-x    2 oracle   oinstall        256 May 16 14:45 lost+found</span><br><span class="line">-rw-r--r--    1 root     system            0 May 19 19:03 oracle</span><br><span class="line"># find / -type f -name oracle -print</span><br><span class="line">/oracle/oracle</span><br><span class="line"># find / -type d -name oracle -print</span><br><span class="line">/home/oracle</span><br><span class="line">/oracle</span><br><span class="line">/oracle/app/oracle</span><br></pre></td></tr></table></figure>
<h3 id="2-查找名为oracle的东西，且通过ls-l展示出来"><a href="#2-查找名为oracle的东西，且通过ls-l展示出来" class="headerlink" title="2.查找名为oracle的东西，且通过ls -l展示出来"></a>2.查找名为oracle的东西，且通过<code>ls -l</code>展示出来</h3><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># find / -name &quot;oracle&quot; -exec ls -l &#123;&#125; \;</span><br><span class="line">total 16</span><br><span class="line">drwxr-xr-x    3 oracle   oinstall        256 May 16 17:19 .java</span><br><span class="line">-rwxr-----    1 oracle   oinstall        857 May 16 18:15 .profile</span><br><span class="line">-rw-------    1 oracle   oinstall        794 May 16 18:15 .sh_history</span><br><span class="line">total 2580304</span><br><span class="line">-rw-r-----    1 root     system   1321110528 May 16 18:30 10gr2_aix5l64_database.cpio</span><br><span class="line">drwxrwxr-x    4 oracle   oinstall        256 May 16 17:19 app</span><br><span class="line">drwxrwxr-x    2 oracle   oinstall        256 May 16 14:45 lost+found</span><br><span class="line">-rw-r--r--    1 root     system            0 May 19 19:03 oracle</span><br><span class="line">total 0</span><br><span class="line">drwxrwxr-x    4 oracle   oinstall        256 May 16 18:15 product</span><br><span class="line">-rw-r--r--    1 root     system            0 May 19 19:03 /oracle/oracle</span><br></pre></td></tr></table></figure>
<p>注意在例1中，以oracle为名的有三个目录，因此，例2中是列出了三个目录下的内容。<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># ls -l /home/oracle</span><br><span class="line">total 16</span><br><span class="line">drwxr-xr-x    3 oracle   oinstall        256 May 16 17:19 .java</span><br><span class="line">-rwxr-----    1 oracle   oinstall        857 May 16 18:15 .profile</span><br><span class="line">-rw-------    1 oracle   oinstall        794 May 16 18:15 .sh_history</span><br><span class="line"># ls -l /oracle</span><br><span class="line">total 2580304</span><br><span class="line">-rw-r-----    1 root     system   1321110528 May 16 18:30 10gr2_aix5l64_database.cpio</span><br><span class="line">drwxrwxr-x    4 oracle   oinstall        256 May 16 17:19 app</span><br><span class="line">drwxrwxr-x    2 oracle   oinstall        256 May 16 14:45 lost+found</span><br><span class="line">-rw-r--r--    1 root     system            0 May 19 19:03 oracle</span><br><span class="line"># ls -l /oracle/app/oracle</span><br><span class="line">total 0</span><br><span class="line">drwxrwxr-x    4 oracle   oinstall        256 May 16 18:15 product</span><br></pre></td></tr></table></figure></p>
<h3 id="3-查找权限为777，且修改时间为四天内的文件"><a href="#3-查找权限为777，且修改时间为四天内的文件" class="headerlink" title="3.查找权限为777，且修改时间为四天内的文件"></a>3.查找权限为777，且修改时间为四天内的文件</h3><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># find . -perm 777 -mtime -4 -print</span><br><span class="line">./oracle</span><br></pre></td></tr></table></figure>
<h3 id="4-删除N天前的文件"><a href="#4-删除N天前的文件" class="headerlink" title="4.删除N天前的文件"></a>4.删除N天前的文件</h3><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -type f -mtime +14 -exec rm -f &#123;&#125; \;</span><br></pre></td></tr></table></figure>
<p>将exec换成ok，表示每删除一次确定一次，以防止误操作。<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -type f -mtime +14 -ok rm -f &#123;&#125; \;</span><br></pre></td></tr></table></figure></p>
<h3 id="5-删除7天前所有名为a-out或者-o的文件，且这些文件不是以nfs形式挂载的"><a href="#5-删除7天前所有名为a-out或者-o的文件，且这些文件不是以nfs形式挂载的" class="headerlink" title="5.删除7天前所有名为a.out或者*.o的文件，且这些文件不是以nfs形式挂载的"></a>5.删除7天前所有名为a.out或者*.o的文件，且这些文件不是以nfs形式挂载的</h3><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / \( -name a.out -o -name &apos;*.o&apos; \) -atime +7 ! -fstype nfs -exec rm -rf &#123;&#125; \;</span><br></pre></td></tr></table></figure>
<h3 id="6-查找当前目录下，以-quot-trc-quot-结尾，且文件内容含有-quot-error-quot-字样的行，打印出来"><a href="#6-查找当前目录下，以-quot-trc-quot-结尾，且文件内容含有-quot-error-quot-字样的行，打印出来" class="headerlink" title="6.查找当前目录下，以&quot;*.trc&quot;结尾，且文件内容含有&quot;error&quot;字样的行，打印出来"></a>6.查找当前目录下，以&quot;*.trc&quot;结尾，且文件内容含有&quot;error&quot;字样的行，打印出来</h3><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># find ./ -name &quot;*.trc&quot; -exec grep -i &quot;error&quot; &apos;&#123;&#125;&apos; \; -print</span><br><span class="line">error: &quot;OUT_CFS_LINK             &quot; exit=$D1 error=$D2 svp=$D3 tdvp=$D4 name=$D5</span><br><span class="line">./alter.trc</span><br></pre></td></tr></table></figure>
<h3 id="7-查找5个最大-最小的文件"><a href="#7-查找5个最大-最小的文件" class="headerlink" title="7.查找5个最大/最小的文件"></a>7.查找5个最大/最小的文件</h3><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># find . -type f -exec ls -s &#123;&#125; \; | sort -n -r | head -5</span><br><span class="line">1290152 ./10gr2_aix5l64_database.cpio</span><br><span class="line">114656 ./Disk1/stage/Components/oracle.rsf.hybrid/10.2.0.0.0/1/DataFiles/group.jar</span><br><span class="line">94456 ./Disk1/stage/Components/oracle.rsf.hybrid/10.2.0.0.0/1/DataFiles/group_new.jar</span><br><span class="line">93168 ./Disk1/stage/Components/oracle.rdbms.install.seeddb/10.2.0.1.0/1//Seed_Database.dfb</span><br><span class="line">44868 ./Disk1/stage/Components/oracle.sysman.console.db/10.2.0.1.0/1/DataFiles/filegroup8.jar</span><br><span class="line"># find . -type f -exec ls -s &#123;&#125; \; | sort -n  | head -5</span><br><span class="line">   0 ./oracle</span><br><span class="line">   4 ./Disk1/doc/dcommon/gifs/bookbig.gif</span><br><span class="line">   4 ./Disk1/doc/dcommon/gifs/bookicon.gif</span><br><span class="line">   4 ./Disk1/doc/dcommon/gifs/booklist.gif</span><br><span class="line">   4 ./Disk1/doc/dcommon/gifs/contbig.gif</span><br></pre></td></tr></table></figure>
<p>对于windows server而言，Windows 2003 R2 SP2以上的版本中，自带有forfiles命令，功能跟find类型，目前win7也有带这个工具，forfiles的用法如下：<br>在win2003 server有forfiles.exe命令刪除n天前的文件：<br><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">C:\WINDOWS\system32\forfiles /P E:\logbak\ /S /M *.gz /D -8 /C &quot;cmd /c del @file&quot;</span><br><span class="line">FORFILES [/P pathname] [/M searchmask] [/S] [/C command] [/D [+ | -] &#123;yyyy-MM-dd | dd&#125;]</span><br><span class="line">/P pathname表示開始搜索的路徑，deault為當前目錄</span><br><span class="line">/M serchmask 根據搜索掩碼搜索文件</span><br><span class="line">/S 指導forfiles遞歸到子目錄</span><br><span class="line">/C command表示為每個file執行的命令，命令字符串應該用雙引號括起來</span><br><span class="line">/D date 選擇文件，其上一次時間大于或扽gui(+)，或者小于或等于(—)，用&quot;yyyy-MM-dd&quot;格式指定的日期；</span><br><span class="line">	或者選擇文件，其上一次修改日期大于或等于(+)當前日期加&quot;dd&quot;天，或者小于等于(-)當前日期減&quot;dd&quot;天</span><br><span class="line">	默認命令是&quot;cmd /c echo @file&quot;，以下變量可以用在命令字符串中：</span><br><span class="line">		@file	 --返回文件名</span><br><span class="line">		@fname	 --返回不帶擴展名的文件名</span><br></pre></td></tr></table></figure></p>
<p>find命令好像不能删除某段时间的问题，比如删除2012年的文件，可以尝试用如下脚本：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for filename in /home/oracle/other/*;</span><br><span class="line">do if [ `date -r $filename +%Y` == &quot;2012&quot; ]</span><br><span class="line">then rm -f $filename</span><br><span class="line">fi done</span><br></pre></td></tr></table></figure>

    
    </div>
    
    <div class="columns is-variable is-1 is-multiline is-mobile">
    
        <span class="column is-narrow"><a class="tag is-light article-tag" href="/tags/find/">#find</a></span>
    
    </div>
    
    
    <div class="columns is-mobile is-multiline article-nav">
        <span class="column is-12-mobile is-half-desktop  article-nav-prev">
            
            <a href="/archiving-and-compressing-files.html">Archiving and Compressing Files</a>
            
        </span>
        <span class="column is-12-mobile is-half-desktop  article-nav-next">
            
            <a href="/aix-basic-operations.html">AIX基本操作</a>
            
        </span>
    </div>
    
</article>





    </div>
</section>

    <footer class="footer footer-padding">
    <div class="container content">
            <div class="column is-narrow has-text-centered is-size-7-mobile">
                &copy;  <a href="/">Kyun Kong&nbsp;</a>
                2013 - 2019
            </div>
    </div>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</footer>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script>

<!-- test if the browser is outdated
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        // plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script>
-->

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
    moment.locale("en-AU");
</script>


    
    
    
    
    
    

    


<script src="/js/script.js"></script>


    
    <div class="searchbox ins-search">
    <div class="searchbox-mask"></div>
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js"></script>
    
</body>
</html>